"use strict";(self.webpackChunkblog_cq=self.webpackChunkblog_cq||[]).push([[2819],{21227:function(l,d,a){a.r(d);var s=a(72269),c=a(93359),o=a(61788),h=a(19977),_=a(91558),t=a(24268),v=a(96057),I=a(85939),i=a(53683),u=a(80936),r=a(67294),n=a(84599),e=a(85893);function x(){return(0,e.jsx)(i.dY,{children:(0,e.jsx)(r.Suspense,{fallback:(0,e.jsx)(u.Z,{}),children:(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)("div",{className:"markdown",children:[(0,e.jsxs)("h2",{id:"1-\u4EC0\u4E48\u662F-nginx",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#1-\u4EC0\u4E48\u662F-nginx",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"1. \u4EC0\u4E48\u662F Nginx\uFF1F"]}),(0,e.jsx)("p",{children:n.texts[0].value}),(0,e.jsxs)("h2",{id:"2-\u5B89\u88C5-nginx",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#2-\u5B89\u88C5-nginx",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"2. \u5B89\u88C5 Nginx"]}),(0,e.jsxs)("h3",{id:"\u5728-linux\u4EE5-ubuntudebian-\u4E3A\u4F8B",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#\u5728-linux\u4EE5-ubuntudebian-\u4E3A\u4F8B",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"\u5728 Linux\uFF08\u4EE5 Ubuntu/Debian \u4E3A\u4F8B\uFF09"]}),(0,e.jsx)(t.Z,{lang:"bash",children:n.texts[1].value}),(0,e.jsxs)("h3",{id:"\u5728-centos--rhel",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#\u5728-centos--rhel",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"\u5728 CentOS / RHEL"]}),(0,e.jsx)(t.Z,{lang:"bash",children:n.texts[2].value}),(0,e.jsxs)("h3",{id:"macos\u4F7F\u7528-homebrew",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#macos\u4F7F\u7528-homebrew",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"macOS\uFF08\u4F7F\u7528 Homebrew\uFF09"]}),(0,e.jsx)(t.Z,{lang:"bash",children:n.texts[3].value}),(0,e.jsx)("p",{children:n.texts[4].value}),(0,e.jsxs)("h2",{id:"3-\u542F\u52A8\u548C\u7BA1\u7406-nginx",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#3-\u542F\u52A8\u548C\u7BA1\u7406-nginx",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"3. \u542F\u52A8\u548C\u7BA1\u7406 Nginx"]}),(0,e.jsx)(t.Z,{lang:"bash",children:n.texts[5].value}),(0,e.jsx)("p",{children:n.texts[6].value}),(0,e.jsx)(t.Z,{lang:"bash",children:n.texts[7].value}),(0,e.jsxs)("h2",{id:"4-nginx-\u914D\u7F6E\u6587\u4EF6\u7B80\u4ECB",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#4-nginx-\u914D\u7F6E\u6587\u4EF6\u7B80\u4ECB",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"4. Nginx \u914D\u7F6E\u6587\u4EF6\u7B80\u4ECB"]}),(0,e.jsxs)("ul",{children:[(0,e.jsxs)("li",{children:[n.texts[8].value,(0,e.jsx)("code",{children:n.texts[9].value})]}),(0,e.jsxs)("li",{children:[n.texts[10].value,(0,e.jsx)("code",{children:n.texts[11].value}),n.texts[12].value,(0,e.jsx)("code",{children:n.texts[13].value})]}),(0,e.jsxs)("li",{children:[n.texts[14].value,(0,e.jsx)("code",{children:n.texts[15].value})]})]}),(0,e.jsxs)("h2",{id:"5-\u7B80\u5355\u7684-http-\u670D\u52A1\u5668\u914D\u7F6E\u5B9E\u4F8B",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#5-\u7B80\u5355\u7684-http-\u670D\u52A1\u5668\u914D\u7F6E\u5B9E\u4F8B",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"5. \u7B80\u5355\u7684 HTTP \u670D\u52A1\u5668\u914D\u7F6E\u5B9E\u4F8B"]}),(0,e.jsx)("p",{children:n.texts[16].value}),(0,e.jsx)(t.Z,{lang:"nginx",children:n.texts[17].value}),(0,e.jsxs)("ul",{children:[(0,e.jsxs)("li",{children:[(0,e.jsx)("code",{children:n.texts[18].value}),n.texts[19].value]}),(0,e.jsxs)("li",{children:[(0,e.jsx)("code",{children:n.texts[20].value}),n.texts[21].value]}),(0,e.jsxs)("li",{children:[(0,e.jsx)("code",{children:n.texts[22].value}),n.texts[23].value]}),(0,e.jsxs)("li",{children:[(0,e.jsx)("code",{children:n.texts[24].value}),n.texts[25].value]}),(0,e.jsxs)("li",{children:[(0,e.jsx)("code",{children:n.texts[26].value}),n.texts[27].value]})]}),(0,e.jsxs)("h2",{id:"6-\u542F\u52A8\u540E\u8BBF\u95EE",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#6-\u542F\u52A8\u540E\u8BBF\u95EE",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"6. \u542F\u52A8\u540E\u8BBF\u95EE"]}),(0,e.jsxs)("p",{children:[n.texts[28].value,(0,e.jsx)("code",{children:n.texts[29].value}),n.texts[30].value]}),(0,e.jsxs)("h2",{id:"7-\u53CD\u5411\u4EE3\u7406\u793A\u4F8B",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#7-\u53CD\u5411\u4EE3\u7406\u793A\u4F8B",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"7. \u53CD\u5411\u4EE3\u7406\u793A\u4F8B"]}),(0,e.jsxs)("p",{children:[n.texts[31].value,(0,e.jsx)("code",{children:n.texts[32].value}),n.texts[33].value]}),(0,e.jsx)(t.Z,{lang:"nginx",children:n.texts[34].value}),(0,e.jsxs)("ul",{children:[(0,e.jsxs)("li",{children:[n.texts[35].value,(0,e.jsx)("code",{children:n.texts[36].value}),n.texts[37].value,(0,e.jsx)("code",{children:n.texts[38].value})]}),(0,e.jsxs)("li",{children:[(0,e.jsx)("code",{children:n.texts[39].value}),n.texts[40].value]})]}),(0,e.jsxs)("h2",{id:"8-\u914D\u7F6E-https\u7B80\u5355\u7248",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#8-\u914D\u7F6E-https\u7B80\u5355\u7248",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"8. \u914D\u7F6E HTTPS\uFF08\u7B80\u5355\u7248\uFF09"]}),(0,e.jsx)("p",{children:n.texts[41].value}),(0,e.jsx)(t.Z,{lang:"nginx",children:n.texts[42].value}),(0,e.jsxs)("h2",{id:"9-\u5E38\u89C1\u547D\u4EE4\u548C\u6280\u5DE7",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#9-\u5E38\u89C1\u547D\u4EE4\u548C\u6280\u5DE7",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"9. \u5E38\u89C1\u547D\u4EE4\u548C\u6280\u5DE7"]}),(0,e.jsx)("ul",{children:(0,e.jsx)("li",{children:n.texts[43].value})}),(0,e.jsx)(t.Z,{lang:"bash",children:n.texts[44].value}),(0,e.jsx)("ul",{children:(0,e.jsx)("li",{children:n.texts[45].value})}),(0,e.jsx)(t.Z,{lang:"bash",children:n.texts[46].value}),(0,e.jsxs)("ul",{children:[(0,e.jsxs)("li",{children:[n.texts[47].value,(0,e.jsx)("code",{children:n.texts[48].value})]}),(0,e.jsxs)("li",{children:[n.texts[49].value,(0,e.jsx)("code",{children:n.texts[50].value})]})]}),(0,e.jsxs)("h2",{id:"10-\u8FDB\u9636\u529F\u80FD\u7B80\u4ECB",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#10-\u8FDB\u9636\u529F\u80FD\u7B80\u4ECB",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"10. \u8FDB\u9636\u529F\u80FD\u7B80\u4ECB"]}),(0,e.jsx)("ul",{children:(0,e.jsx)("li",{children:n.texts[51].value})}),(0,e.jsx)(t.Z,{lang:"nginx",children:n.texts[52].value}),(0,e.jsxs)("ul",{children:[(0,e.jsx)("li",{children:n.texts[53].value}),(0,e.jsxs)("li",{children:[n.texts[54].value,(0,e.jsx)("code",{children:n.texts[55].value}),n.texts[56].value]}),(0,e.jsx)("li",{children:n.texts[57].value}),(0,e.jsx)("li",{children:n.texts[58].value}),(0,e.jsx)("li",{children:n.texts[59].value})]}),(0,e.jsxs)("h2",{id:"nginx\u8DE8\u57DF\u914D\u7F6E",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#nginx\u8DE8\u57DF\u914D\u7F6E",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"nginx\u8DE8\u57DF\u914D\u7F6E"]}),(0,e.jsx)(t.Z,{lang:"bash",children:n.texts[60].value})]})})})})}d.default=x},84599:function(l,d,a){a.r(d),a.d(d,{texts:function(){return s}});const s=[{value:"Nginx \u662F\u4E00\u6B3E\u9AD8\u6027\u80FD\u7684\u5F00\u6E90 HTTP \u548C\u53CD\u5411\u4EE3\u7406\u670D\u52A1\u5668\uFF0C\u540C\u65F6\u4E5F\u53EF\u4EE5\u505A\u8D1F\u8F7D\u5747\u8861\u3001\u90AE\u4EF6\u4EE3\u7406\u7B49\u529F\u80FD\u3002\u5B83\u4EE5\u8F7B\u91CF\u3001\u9AD8\u5E76\u53D1\u8457\u79F0\u3002",paraId:0,tocIndex:0},{value:`sudo apt update
sudo apt install nginx
`,paraId:1,tocIndex:2},{value:`sudo yum install epel-release
sudo yum install nginx
`,paraId:2,tocIndex:3},{value:`brew install nginx
brew info nginx \u67E5\u770Bnginx \u5B89\u88C5\u7684\u5177\u4F53\u4F4D\u7F6E\u548C\u914D\u7F6E\u6587\u4EF6\u6240\u5728\u7684\u4F4D\u7F6E
`,paraId:3,tocIndex:4},{value:`\u82E5\u8981\u52A0\u914D\u7F6E \u5728 /opt/homebrew/etc/nginx/servers/ \u6587\u4EF6\u5939\u4E0B\u9762\u6DFB\u52A0 xxx.conf  (\u76F4\u63A5\u914D\u7F6Eserver \uFF0C\u914D\u7F6E\u6587\u4EF6\u5916\u9762\u4E0D\u9700\u8981\u518D\u5199http)
servers\u6587\u4EF6\u9700\u8981\u81EA\u5DF1\u5EFA`,paraId:4,tocIndex:4},{value:`# \u542F\u52A8 Nginx
sudo systemctl start nginx

# \u505C\u6B62 Nginx
sudo systemctl stop nginx

# \u91CD\u542F Nginx
sudo systemctl restart nginx

# \u91CD\u65B0\u52A0\u8F7D\u914D\u7F6E\uFF08\u4E0D\u91CD\u542F\u8FDB\u7A0B\uFF09
sudo systemctl reload nginx

# \u67E5\u770B\u72B6\u6001
sudo systemctl status nginx
`,paraId:5,tocIndex:5},{value:"\u6216\u8005\u76F4\u63A5\u7528\u547D\u4EE4\uFF1A",paraId:6,tocIndex:5},{value:`sudo nginx               # \u542F\u52A8
sudo nginx -s stop       # \u505C\u6B62
sudo nginx -s reload     # \u91CD\u65B0\u52A0\u8F7D\u914D\u7F6E
`,paraId:7,tocIndex:5},{value:"\u4E3B\u914D\u7F6E\u6587\u4EF6\uFF1A ",paraId:8,tocIndex:6},{value:"/etc/nginx/nginx.conf",paraId:8,tocIndex:6},{value:"\u7AD9\u70B9\u914D\u7F6E\u76EE\u5F55\uFF08Debian/Ubuntu\uFF09\uFF1A ",paraId:8,tocIndex:6},{value:"/etc/nginx/sites-available/",paraId:8,tocIndex:6},{value:" \u548C ",paraId:8,tocIndex:6},{value:"/etc/nginx/sites-enabled/",paraId:8,tocIndex:6},{value:"\u670D\u52A1\u5668\u6839\u76EE\u5F55\uFF08\u9ED8\u8BA4\uFF09\uFF1A ",paraId:8,tocIndex:6},{value:"/var/www/html",paraId:8,tocIndex:6},{value:"\u9ED8\u8BA4\u7684 nginx.conf \u7ED3\u6784\u4E2D\uFF0C\u6709\u7C7B\u4F3C\uFF1A",paraId:9,tocIndex:7},{value:`http {
    server {
        listen 80;
        server_name localhost;

        root /var/www/html;
        index index.html index.htm;

        location / {
            try_files $uri $uri/ =404;
        }
    }
}
`,paraId:10,tocIndex:7},{value:"listen 80;",paraId:11,tocIndex:7},{value:" \u76D1\u542C 80 \u7AEF\u53E3\uFF08HTTP \u9ED8\u8BA4\u7AEF\u53E3\uFF09",paraId:11,tocIndex:7},{value:"server_name",paraId:11,tocIndex:7},{value:" \u6307\u5B9A\u57DF\u540D\u6216 IP\uFF08\u53EF\u7528 _ \u901A\u914D\uFF09",paraId:11,tocIndex:7},{value:"root",paraId:11,tocIndex:7},{value:" \u6307\u5B9A\u7F51\u7AD9\u6587\u4EF6\u6839\u76EE\u5F55",paraId:11,tocIndex:7},{value:"index",paraId:11,tocIndex:7},{value:" \u6307\u5B9A\u9ED8\u8BA4\u9996\u9875\u6587\u4EF6",paraId:11,tocIndex:7},{value:"location",paraId:11,tocIndex:7},{value:" \u5B9A\u4E49\u8DEF\u7531\u89C4\u5219",paraId:11,tocIndex:7},{value:"\u542F\u52A8 Nginx \u5E76\u8BBF\u95EE\u670D\u52A1\u5668 IP \u6216\u57DF\u540D\u5373\u53EF\u770B\u5230 ",paraId:12,tocIndex:8},{value:"/var/www/html",paraId:12,tocIndex:8},{value:" \u76EE\u5F55\u4E0B\u7684\u9ED8\u8BA4\u7F51\u9875\u3002",paraId:12,tocIndex:8},{value:"\u5047\u5982\u4F60\u6709\u4E00\u4E2A\u540E\u7AEF\u670D\u52A1\u8FD0\u884C\u5728 ",paraId:13,tocIndex:9},{value:"http://127.0.0.1:3000",paraId:13,tocIndex:9},{value:"\uFF0C\u4F60\u60F3\u901A\u8FC7 Nginx \u5BF9\u5916\u63D0\u4F9B\u4EE3\u7406\uFF1A",paraId:13,tocIndex:9},{value:`server {
    listen 80;
    server_name example.com;

    location / {
        proxy_pass http://127.0.0.1:3000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    }
}
`,paraId:14,tocIndex:9},{value:"\u8BBF\u95EE ",paraId:15,tocIndex:9},{value:"http://example.com",paraId:15,tocIndex:9},{value:" \u4F1A\u88AB\u8F6C\u53D1\u5230 ",paraId:15,tocIndex:9},{value:"http://127.0.0.1:3000",paraId:15,tocIndex:9},{value:"proxy_set_header",paraId:15,tocIndex:9},{value:" \u4F20\u9012\u4E00\u4E9B\u8BF7\u6C42\u5934\uFF0C\u4FDD\u6301\u5BA2\u6237\u7AEF\u4FE1\u606F",paraId:15,tocIndex:9},{value:"\u4F60\u9700\u8981\u5148\u83B7\u53D6 SSL \u8BC1\u4E66\uFF08\u5982\u4F7F\u7528 Let's Encrypt \u514D\u8D39\u8BC1\u4E66\uFF09\u3002",paraId:16,tocIndex:10},{value:`server {
    listen 443 ssl;
    server_name example.com;

    ssl_certificate /path/to/fullchain.pem;
    ssl_certificate_key /path/to/privkey.pem;

    location / {
        proxy_pass http://127.0.0.1:3000;
    }
}

# \u53EF\u9009\u8DF3\u8F6C HTTP \u5230 HTTPS
server {
    listen 80;
    server_name example.com;
    return 301 https://$host$request_uri;
}
`,paraId:17,tocIndex:10},{value:"\u8BED\u6CD5\u68C0\u67E5",paraId:18,tocIndex:11},{value:`sudo nginx -t
`,paraId:19,tocIndex:11},{value:"\u91CD\u65B0\u52A0\u8F7D\u914D\u7F6E\uFF08\u4FEE\u6539\u914D\u7F6E\u540E\u751F\u6548\uFF09",paraId:20,tocIndex:11},{value:`sudo nginx -s reload
`,paraId:21,tocIndex:11},{value:"\u67E5\u770B\u8BBF\u95EE\u65E5\u5FD7\uFF1A ",paraId:22,tocIndex:11},{value:"/var/log/nginx/access.log",paraId:22,tocIndex:11},{value:"\u67E5\u770B\u9519\u8BEF\u65E5\u5FD7\uFF1A ",paraId:22,tocIndex:11},{value:"/var/log/nginx/error.log",paraId:22,tocIndex:11},{value:"\u8D1F\u8F7D\u5747\u8861\uFF1A",paraId:23,tocIndex:12},{value:`upstream backend {
    server 127.0.0.1:3000;
    server 127.0.0.1:3001;
}

server {
    listen 80;
    location / {
        proxy_pass http://backend;
    }
}
`,paraId:24,tocIndex:12},{value:"\u9759\u6001\u8D44\u6E90\u7F13\u5B58",paraId:25,tocIndex:12},{value:"URL \u91CD\u5199\u89C4\u5219 (",paraId:25,tocIndex:12},{value:"rewrite",paraId:25,tocIndex:12},{value:")",paraId:25,tocIndex:12},{value:"\u9632\u76D7\u94FE\u3001\u5B89\u5168\u914D\u7F6E",paraId:25,tocIndex:12},{value:"\u9650\u6D41\u3001\u9650\u901F",paraId:25,tocIndex:12},{value:"HTTP/2 \u652F\u6301",paraId:25,tocIndex:12},{value:`server {
	listen 80;
	server_name static.yangzw.vip;
	# \u65B0\u589E\u90E8\u5206-\u5F00\u59CB
	add_header "Access-Control-Allow-Origin" $http_origin; # \u5F53\u524D\u8BF7\u6C42\u57DF\u540D\uFF0C\u4E0D\u652F\u6301\u643A\u5E26Cookie\u7684\u8BF7\u6C42
	add_header "Access-Control-Allow-Credentials" "true"; # \u8BF7\u6C42\u53EF\u643A\u5E26Cookie
	add_header "Access-Control-Allow-Methods" "GET, POST, OPTIONS"; # \u5141\u8BB8\u7684\u8BF7\u6C42\u65B9\u5F0F
	add_header "Access-Control-Allow-Headers" $http_access_control_request_headers; # \u5141\u8BB8\u7684\u8BF7\u6C42Header\uFF0C\u53EF\u8BBE\u7F6E\u4E3A*
	add_header "Access-Control-Expose-Headers" "Content-Length,Content-Range";
	if ($request_method = "OPTIONS") {
		add_header "Access-Control-Max-Age" 18000000; # \u8BF7\u6C42\u7684\u6709\u6548\u671F\uFF1A\u5728\u6709\u6548\u671F\u5185\u65E0\u9700\u53D1\u51FA\u53E6\u4E00\u6761\u9884\u68C0\u8BF7\u6C42
		add_header "Content-Length" 0;
		add_header "Content-Type" "text/plain; charset=utf-8";
	}
	# \u65B0\u589E\u90E8\u5206-\u7ED3\u675F
	location / {
		root /www/static;
		index index.html;
	}
}

`,paraId:26,tocIndex:13}]}}]);
