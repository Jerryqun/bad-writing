---
nav: Node
group: 基础
toc: content
mobile: false
title: node作为中间层
---

## node 作为中间层

什么是中间层

就是前端---请求---> nodejs ----请求---->后端 ----响应--->nodejs--数据处理---响应---->前端。

中间层可以做的事情<br/>
1、代理：在开发环境下，我们可以利用代理来，解决最常见的跨域问题；在线上环境下，我们可以利用代理，转发请求到多个服务端。<br/>
2、缓存：缓存其实是更靠近前端的需求，用户的动作触发数据的更新，node 中间层可以直接处理一部分缓存需求<br/>
3、限流：node 中间层，可以针对接口或者路由做响应的限流。<br/>
4、日志：相比其他服务端语言，node 中间层的日志记录，能更方便快捷的定位问题（是在浏览器端还是服务端）<br/>
5、监控：擅长高并发的请求处理，做监控也是合适的选项<br/>
6、鉴权：有一个中间层去鉴权，也是一种单一职责的实现<br/>
7、路由：前端更需要掌握页面路由的权限和逻辑。<br/>
8、服务端渲染：node 中间层的解决方案更灵活，比如 SSR、模板直出、利用一些 JS 库做预渲染等等。<br/>

node 转发 API（node 中间层）的优势<br/>
可以在中间层把 java|php 的数据，处理成对前端更友好的格式 可以解决前端的跨域问题，因为服务器端的请求是不涉及跨域的，跨域是浏览器的同源策略导致的 可以将多个请求在通过中间层合并，减少前端的请求

如何做请求合并转发
使用 express 中间件 multifetch 可以将请求批量合并 使用 express+http-proxy-middleware 实现接口代理转发
