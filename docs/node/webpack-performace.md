---
nav: Node
group: webpack
toc: content
mobile: false
title: 性能优化
---

# webpack 性能优化 （产出代码）

- 小图片 base64
- bundle 加 hash
- 懒加载
- 提取公共代码
- IngorePlugin
- CDN
- production  
  1.自动压缩  
  2.vue react 会自动删除调试代码（本身体积小，执行更快）  
  3.启动 Tree-Shaking（删除没有用到的代码）  
  4.默认开启 Scope Hoisting <a src='https://zhuanlan.zhihu.com/p/162066537'>参考</a>

## 为什么前端打包出来的静态文件名字是一串 Hash 值 ？

1. 缓存有效性：当文件内容发生变化时，Hash 值也随之改变，这意味着浏览器能够识别文件的更新。如果文件内容没有变化，Hash 值保持不变，浏览器可以从缓存中加载文件，节省网络带宽和提高加载速度。
2. 避免缓存问题：在开发和部署过程中，可能会遇到浏览器缓存旧的文件版本的问题。引入 Hash 值后，即使文件的路径没有变化，当文件内容更新时，Hash 值的变化会确保浏览器下载新的文件，避免了缓存所导致的问题。
3. 版本控制： Hash 值可以作为文件的唯一标识，这样在文件名中就包含了版本信息
4. 构建优化：在大型项目中，打包工具（如 Webpack）会根据文件的内容生成 Hash 值，这样可以优化打包过程，促进增量编译和更高效的构建。
5. 提高安全性：通过结合文件的内容生成 Hash 值，可以降低某些类型的攻击风险。例如，攻击者如果想上传一个恶意文件来替换合法文件，就必须知道文件的具体内容才能生成正确的 Hash，这增加了入侵的难度。

启发式缓存  
在 Web 应用和浏览器缓存中，服务器通常会通过 HTTP 头部信息（如 Cache-Control、Expires）明确指示一个资源可以缓存多长时间。但有时这些指示可能缺失，或者某些资源的缓存控制信息不完整，客户端就会依赖启发式规则来确定该资源的缓存时长。这种规则可能基于资源的特征、文件类型，或者历史经验等。

前端打包时使用 Hash 值作为静态文件名，主要是为了缓存优化、版本管理和避免缓存污染。当文件内容发生变化时，打包工具会生成不同的 Hash 值，确保文件名唯一，从而强制浏览器加载最新版本的资源，避免加载旧缓存文件引发的问题。同时，如果文件内容没有变化，文件名保持不变，浏览器可以继续使用缓存中的资源，从而减少网络请求，提升加载性能和用户体验。通过这种方式，前端应用可以高效地管理静态资源，保证用户始终访问到最新内容。
