"use strict";(self.webpackChunkblog_cq=self.webpackChunkblog_cq||[]).push([[2259],{75094:function(d,u,n){n.r(u);var _=n(72269),l=n(93359),c=n(61788),m=n(19977),E=n(91558),a=n(24268),h=n(96057),x=n(85939),s=n(53683),i=n(80936),o=n(67294),t=n(96576),e=n(85893);function r(){return(0,e.jsx)(s.dY,{children:(0,e.jsx)(o.Suspense,{fallback:(0,e.jsx)(i.Z,{}),children:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:"markdown",children:[(0,e.jsx)("p",{children:(0,e.jsx)("a",{href:"https://fe.ecool.fun/topic/0295b261-f56a-41fd-847b-7f6947284279?orderBy=updateTime&order=desc&tagId=0",target:"_blank",children:t.texts[0].value})}),(0,e.jsxs)("h2",{id:"usetimeout-\u89E3\u51B3\u4E86\u4EC0\u4E48\u95EE\u9898",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#usetimeout-\u89E3\u51B3\u4E86\u4EC0\u4E48\u95EE\u9898",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"useTimeout \u89E3\u51B3\u4E86\u4EC0\u4E48\u95EE\u9898"]}),(0,e.jsx)("p",{children:t.texts[1].value})]}),(0,e.jsx)(s.Dl,{demo:{id:"docs-react-hooks-use-timeout-demo-0"},previewerProps:{}}),(0,e.jsxs)("div",{className:"markdown",children:[(0,e.jsxs)("h3",{id:"hooks-\u7684\u95ED\u5305\u7F3A\u9677",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#hooks-\u7684\u95ED\u5305\u7F3A\u9677",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"hooks \u7684\u95ED\u5305\u7F3A\u9677"]}),(0,e.jsx)("p",{children:t.texts[2].value})]}),(0,e.jsx)(s.Dl,{demo:{id:"docs-react-hooks-use-timeout-demo-1"},previewerProps:{}}),(0,e.jsxs)("div",{className:"markdown",children:[(0,e.jsxs)("h3",{id:"usestate-\u51FD\u6570\u5F0F\u66F4\u65B0\u89E3\u51B3\u95ED\u5305\u95EE\u9898",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#usestate-\u51FD\u6570\u5F0F\u66F4\u65B0\u89E3\u51B3\u95ED\u5305\u95EE\u9898",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"useState \u51FD\u6570\u5F0F\u66F4\u65B0\u89E3\u51B3\u95ED\u5305\u95EE\u9898"]}),(0,e.jsx)(a.Z,{lang:"js",children:t.texts[3].value}),(0,e.jsxs)("h3",{id:"\u5229\u7528\u95ED\u5305\u7F13\u5B58\u7684\u662F\u5BF9\u8C61\u7684\u5F15\u7528\u6765\u89E3\u51B3\u95ED\u5305\u95EE\u9898",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#\u5229\u7528\u95ED\u5305\u7F13\u5B58\u7684\u662F\u5BF9\u8C61\u7684\u5F15\u7528\u6765\u89E3\u51B3\u95ED\u5305\u95EE\u9898",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"\u5229\u7528\u95ED\u5305\u7F13\u5B58\u7684\u662F\u5BF9\u8C61\u7684\u5F15\u7528\u6765\u89E3\u51B3\u95ED\u5305\u95EE\u9898"]}),(0,e.jsx)(a.Z,{lang:"js",children:t.texts[4].value}),(0,e.jsxs)("h2",{id:"usetimeout-\u51FD\u6570",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#usetimeout-\u51FD\u6570",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"useTimeout \u51FD\u6570"]}),(0,e.jsx)(a.Z,{lang:"js",children:t.texts[5].value})]})]})})})}u.default=r},96576:function(d,u,n){n.r(u),n.d(u,{texts:function(){return _}});const _=[{value:"\u53C2\u8003",paraId:0},{value:"\u6211\u4EEC\u539F\u672C\u7684\u76EE\u7684\u662F\u5728\u9875\u9762\u6E32\u67D3\u5B8C 3s \u540E\u4FEE\u6539\u4E00\u4E0B state\uFF0C\u4F46\u662F\u4F60\u4F1A\u53D1\u73B0\u5F53 state+1 \u540E\uFF0C\u89E6\u53D1\u4E86\u9875\u9762\u7684\u91CD\u65B0\u6E32\u67D3\uFF0C\u5C31\u4F1A\u91CD\u65B0\u6709\u4E00\u4E2A 3s \u7684\u5B9A\u65F6\u5668\u51FA\u73B0\u6765\u7ED9 state+1\uFF0C\u65E2\u800C\u53D8\u6210\u4E86\u6BCF 3 \u79D2+1\u3002",paraId:1,tocIndex:0},{value:"setTimeout \u4E2D count \u7684\u503C\u6CA1\u6709\u62FF\u5230\u6700\u65B0\u503C \u6700\u540E\u53D8\u6210\u4E86 1 \u800C\u4E0D\u662F 6",paraId:2,tocIndex:1},{value:`import { Button } from 'antd';
const Demo = () => {
  const [state, setState] = React.useState(0);
  React.useEffect(() => {
    //\u8BA1\u7B97\u65F6state \u7684\u503C\u4E3A0
    // setTimeout(() => setState(state + 2), 5000);
    //\u8BA1\u7B97\u65F6state \u7684\u503C\u4E3A\u6700\u65B0\u503C
    setTimeout(() => setState((state) => state + 2), 5000);
  }, []);
  return <Button onClick={() => setState(state + 1)}>{state}</Button>;
};

export default Demo;
`,paraId:3,tocIndex:2},{value:`function App() {
  // return <Demo1 />
  return <Demo2 />;
}

function Demo2() {
  const [obj, setObj] = useState({ name: 'chechengyi' });

  useEffect(() => {
    setInterval(() => {
      console.log(obj);
    }, 2000);
  }, []);

  function handClick() {
    setObj((prevState) => {
      var nowObj = Object.assign(prevState, {
        name: 'baobao',
        age: 24,
      });
      console.log(nowObj == prevState);
      return nowObj;
    });
  }
  return (
    <div>
      <div>
        <span>
          name: {obj.name} | age: {obj.age}
        </span>
        <div>
          <button onClick={handClick}>click!</button>
        </div>
      </div>
    </div>
  );
}
`,paraId:4,tocIndex:3},{value:`function useTimeout(callback, delay) {
  const ref = React.useRef();
  React.useEffect(() => {
    ref.current = callback;
  }, [callback]);

  React.useEffect(() => {
    if (delay !== null) {
      setTimeout(() => {
        ref.current();
      }, delay);
    }
  }, [delay]);
}
`,paraId:5,tocIndex:4}]}}]);
