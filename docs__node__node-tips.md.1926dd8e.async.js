"use strict";(self.webpackChunkblog_cq=self.webpackChunkblog_cq||[]).push([[5285],{26469:function(t,r,s){s.r(r);var d=s(72269),o=s(93359),x=s(61788),p=s(19977),h=s(91558),a=s(24268),j=s(96057),v=s(85939),u=s(53683),l=s(80936),i=s(67294),n=s(59256),e=s(85893);function c(){return(0,e.jsx)(u.dY,{children:(0,e.jsx)(i.Suspense,{fallback:(0,e.jsx)(l.Z,{}),children:(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)("div",{className:"markdown",children:[(0,e.jsxs)("h2",{id:"\u5728-node-\u4E2D\u4F7F\u7528-esm-\u4E66\u5199",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#\u5728-node-\u4E2D\u4F7F\u7528-esm-\u4E66\u5199",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"\u5728 node \u4E2D\u4F7F\u7528 esm \u4E66\u5199"]}),(0,e.jsx)("p",{children:n.texts[0].value}),(0,e.jsx)("p",{children:n.texts[1].value}),(0,e.jsx)("p",{children:n.texts[2].value}),(0,e.jsx)("p",{children:n.texts[3].value}),(0,e.jsx)(a.Z,{lang:"json",children:n.texts[4].value}),(0,e.jsxs)("h2",{id:"cross-env",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#cross-env",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"cross-env"]}),(0,e.jsx)("p",{children:n.texts[5].value}),(0,e.jsx)(a.Z,{lang:"js",children:n.texts[6].value}),(0,e.jsxs)("h2",{id:"dotenv",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#dotenv",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"dotenv"]}),(0,e.jsx)("p",{children:n.texts[7].value}),(0,e.jsx)(a.Z,{lang:"js",children:n.texts[8].value}),(0,e.jsxs)("h2",{id:"fs-\u8BFB\u5199-json-\u6587\u4EF6",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#fs-\u8BFB\u5199-json-\u6587\u4EF6",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"fs \u8BFB\u5199 json \u6587\u4EF6"]}),(0,e.jsx)(a.Z,{lang:"js",children:n.texts[9].value}),(0,e.jsxs)("h2",{id:"packagejson-\u6267\u884C\u591A\u4E2A\u547D\u4EE4",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#packagejson-\u6267\u884C\u591A\u4E2A\u547D\u4EE4",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"package.json \u6267\u884C\u591A\u4E2A\u547D\u4EE4"]}),(0,e.jsx)("p",{children:n.texts[10].value}),(0,e.jsx)("p",{children:n.texts[11].value}),(0,e.jsx)(a.Z,{lang:"json",children:n.texts[12].value}),(0,e.jsxs)("h2",{id:"packjson-\u4E2D\u4F9D\u8D56\u5305\u7248\u672C\u7684\u524D\u7F00\u4F5C\u7528",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#packjson-\u4E2D\u4F9D\u8D56\u5305\u7248\u672C\u7684\u524D\u7F00\u4F5C\u7528",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"packjson \u4E2D\u4F9D\u8D56\u5305\u7248\u672C\u7684\u524D\u7F00\u4F5C\u7528"]}),(0,e.jsx)(a.Z,{lang:"bash",children:n.texts[13].value}),(0,e.jsx)("p",{children:n.texts[14].value}),(0,e.jsx)("p",{children:n.texts[15].value}),(0,e.jsx)("p",{children:n.texts[16].value}),(0,e.jsx)("p",{children:n.texts[17].value}),(0,e.jsxs)("h2",{id:"node-\u83B7\u53D6-ip",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#node-\u83B7\u53D6-ip",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"node \u83B7\u53D6 ip"]}),(0,e.jsx)(a.Z,{lang:"js",children:n.texts[18].value}),(0,e.jsxs)("h2",{id:"\u7EC8\u7AEF\u52A8\u753B",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#\u7EC8\u7AEF\u52A8\u753B",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"\u7EC8\u7AEF\u52A8\u753B"]}),(0,e.jsx)("p",{children:(0,e.jsx)("a",{target:"_blank",href:"https://www.npmjs.com/package/ora",children:n.texts[19].value})}),(0,e.jsx)(a.Z,{lang:"js",children:n.texts[20].value}),(0,e.jsxs)("h2",{id:"\u63CF\u6587\u4EF6\u76EE\u5F55",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#\u63CF\u6587\u4EF6\u76EE\u5F55",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"\u63CF\u6587\u4EF6\u76EE\u5F55"]}),(0,e.jsx)("p",{children:(0,e.jsx)("a",{target:"_blank",href:"https://www.npmjs.com/package/glob",children:n.texts[21].value})}),(0,e.jsx)(a.Z,{lang:"js",children:n.texts[22].value}),(0,e.jsxs)("h2",{id:"\u5E38\u7528-api",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#\u5E38\u7528-api",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"\u5E38\u7528 api"]}),(0,e.jsx)(a.Z,{lang:"js",children:n.texts[23].value}),(0,e.jsxs)("h2",{id:"live-server-\u9759\u6001\u8D44\u6E90\u670D\u52A1\u5668",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#live-server-\u9759\u6001\u8D44\u6E90\u670D\u52A1\u5668",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"live-server \u9759\u6001\u8D44\u6E90\u670D\u52A1\u5668"]}),(0,e.jsx)("p",{children:(0,e.jsx)("a",{href:"https://www.npmjs.com/package/live-server",children:n.texts[24].value})}),(0,e.jsx)(a.Z,{lang:"js",children:n.texts[25].value}),(0,e.jsxs)("h2",{id:"immer",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#immer",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"immer"]}),(0,e.jsx)("p",{children:(0,e.jsx)("a",{href:"https://zhuanlan.zhihu.com/p/146773995",children:n.texts[26].value})}),(0,e.jsx)(a.Z,{lang:"js",children:n.texts[27].value}),(0,e.jsxs)("h2",{id:"immutablejs-\u4E0E-immerjs-\u7684\u533A\u522B",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#immutablejs-\u4E0E-immerjs-\u7684\u533A\u522B",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Immutable.js \u4E0E Immer.js \u7684\u533A\u522B"]}),(0,e.jsx)("p",{children:(0,e.jsx)("a",{target:"_blank",href:"https://zhuanlan.zhihu.com/p/122187278",children:n.texts[28].value})}),(0,e.jsxs)("p",{children:[n.texts[29].value,(0,e.jsx)("br",{})]}),(0,e.jsx)("p",{children:n.texts[30].value}),(0,e.jsxs)("p",{children:[n.texts[31].value,(0,e.jsx)("br",{})]}),(0,e.jsxs)("h2",{id:"node-\u8FDB\u7A0B\u4E4B\u95F4\u5982\u4F55\u901A\u8BAF",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#node-\u8FDB\u7A0B\u4E4B\u95F4\u5982\u4F55\u901A\u8BAF",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"node \u8FDB\u7A0B\u4E4B\u95F4\u5982\u4F55\u901A\u8BAF"]}),(0,e.jsx)("p",{children:n.texts[32].value}),(0,e.jsxs)("h3",{id:"1-child-process",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#1-child-process",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"1. Child Process"]}),(0,e.jsxs)("p",{children:[n.texts[33].value,(0,e.jsx)("code",{children:n.texts[34].value}),n.texts[35].value,(0,e.jsx)("code",{children:n.texts[36].value}),n.texts[37].value]}),(0,e.jsx)(a.Z,{lang:"js",children:n.texts[38].value}),(0,e.jsx)(a.Z,{lang:"js",children:n.texts[39].value}),(0,e.jsxs)("h3",{id:"2-cluster",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#2-cluster",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"2. Cluster"]}),(0,e.jsxs)("p",{children:[n.texts[40].value,(0,e.jsx)("code",{children:n.texts[41].value}),n.texts[42].value]}),(0,e.jsx)(a.Z,{lang:"js",children:n.texts[43].value}),(0,e.jsxs)("h3",{id:"3-\u4F7F\u7528-tcpudp-\u5957\u63A5\u5B57",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#3-\u4F7F\u7528-tcpudp-\u5957\u63A5\u5B57",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"3. \u4F7F\u7528 TCP/UDP \u5957\u63A5\u5B57"]}),(0,e.jsxs)("p",{children:[n.texts[44].value,(0,e.jsx)("code",{children:n.texts[45].value}),n.texts[46].value,(0,e.jsx)("code",{children:n.texts[47].value}),n.texts[48].value]}),(0,e.jsx)(a.Z,{lang:"js",children:n.texts[49].value}),(0,e.jsxs)("h3",{id:"4-\u4F7F\u7528\u6D88\u606F\u961F\u5217\u6216-broker",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#4-\u4F7F\u7528\u6D88\u606F\u961F\u5217\u6216-broker",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"4. \u4F7F\u7528\u6D88\u606F\u961F\u5217\u6216 Broker"]}),(0,e.jsx)("p",{children:n.texts[50].value}),(0,e.jsxs)("h3",{id:"5-\u4F7F\u7528\u5171\u4EAB\u8D44\u6E90",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#5-\u4F7F\u7528\u5171\u4EAB\u8D44\u6E90",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"5. \u4F7F\u7528\u5171\u4EAB\u8D44\u6E90"]}),(0,e.jsx)("p",{children:n.texts[51].value}),(0,e.jsxs)("p",{children:[n.texts[52].value,(0,e.jsx)("code",{children:n.texts[53].value}),n.texts[54].value,(0,e.jsx)("code",{children:n.texts[55].value}),n.texts[56].value]}),(0,e.jsxs)("h2",{id:"\u548C\u7684\u533A\u522B",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#\u548C\u7684\u533A\u522B",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"/\u548C./\u7684\u533A\u522B"]}),(0,e.jsxs)("p",{children:[n.texts[57].value,(0,e.jsx)("br",{}),(0,e.jsx)("code",{children:n.texts[58].value}),(0,e.jsx)("br",{})]}),(0,e.jsxs)("p",{children:[n.texts[59].value,(0,e.jsx)("br",{}),n.texts[60].value,(0,e.jsx)("br",{})]}),(0,e.jsx)("p",{children:n.texts[61].value}),(0,e.jsxs)("h2",{id:"node-\u5982\u4F55\u5F00\u542F\u5B50\u8FDB\u7A0B",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#node-\u5982\u4F55\u5F00\u542F\u5B50\u8FDB\u7A0B",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"node \u5982\u4F55\u5F00\u542F\u5B50\u8FDB\u7A0B"]}),(0,e.jsxs)("ul",{children:[(0,e.jsx)("li",{children:n.texts[62].value}),(0,e.jsx)("li",{children:n.texts[63].value})]})]})})})})}r.default=c},59256:function(t,r,s){s.r(r),s.d(r,{texts:function(){return d}});const d=[{value:"Node \u8981\u6C42\u4F7F\u7528 ESM \u7684\u6587\u4EF6\u91C7\u7528.mjs \u540E\u7F00\uFF0C\u53EA\u8981\u6587\u4EF6\u4E2D\u5B58\u5728 import/export \u547D\u4EE4\u5C31\u5FC5\u987B\u4F7F\u7528.mjs \u540E\u7F00\u3002\u82E5\u4E0D\u5E0C\u671B\u4FEE\u6539\u6587\u4EF6\u540E\u7F00\uFF0C\u53EF\u5728 package.json \u4E2D\u6307\u5B9A type \u4E3A module\u3002\u57FA\u4E8E\u6B64\uFF0C\u82E5\u5176\u4ED6\u6587\u4EF6\u4F7F\u7528 CJS\uFF0C\u5C31\u9700\u5C06\u5176\u6587\u4EF6\u540E\u7F00\u6539\u6210.cjs\u3002\u82E5\u5728 package.json \u4E2D\u672A\u6307\u5B9A type \u6216\u6307\u5B9A type \u4E3A commonjs\uFF0C\u5219\u4EE5.js \u4E3A\u540E\u7F00\u7684\u6587\u4EF6\u4F1A\u88AB\u89E3\u6790\u4E3A CJS\u3002",paraId:0,tocIndex:0},{value:"Node v13.2.0 \u624D\u652F\u6301 esm",paraId:1,tocIndex:0},{value:"Node v13.2.0 \u5BF9\u5E94 Npm v6.13.1\u3002",paraId:2,tocIndex:0},{value:"\u914D\u7F6E",paraId:3,tocIndex:0},{value:`{
  "type": "module",
  "engines": {
    "node": ">=13.2.0",
    "npm": ">=6.13.1"
  }
}
`,paraId:4,tocIndex:0},{value:"cross-env \u7528\u4E8E\u5728\u4E0D\u540C\u64CD\u4F5C\u7CFB\u7EDF\u4E0A\u7EDF\u4E00\u8BBE\u7F6E\u73AF\u5883\u53D8\u91CF\u3002",paraId:5,tocIndex:1},{value:`npm install cross-env --save-dev

"scripts": {
  "start": "cross-env NODE_ENV=development webpack serve",
  "build": "cross-env NODE_ENV=production webpack"
}
`,paraId:6,tocIndex:1},{value:"\u4E3A\u4E86\u66F4\u65B9\u4FBF\u5730\u7BA1\u7406\u73AF\u5883\u53D8\u91CF\uFF0C\u7279\u522B\u662F\u5728\u5F00\u53D1\u73AF\u5883\u4E2D\uFF0C\u53EF\u4EE5\u4F7F\u7528 dotenv \u63D2\u4EF6\u5C06 .env \u6587\u4EF6\u4E2D\u7684\u53D8\u91CF\u52A0\u8F7D\u5230 process.env \u4E2D\u3002",paraId:7,tocIndex:2},{value:`npm install dotenv --save

const path = require('path');
const webpack = require('webpack');
require('dotenv').config();

module.exports = {
  // \u5176\u4ED6\u914D\u7F6E
  plugins: [
    new webpack.DefinePlugin({
      'process.env.NODE_ENV': JSON.stringify(process.env.NODE_ENV),
      'process.env.API_URL': JSON.stringify(process.env.API_URL),
    })
  ]
};
`,paraId:8,tocIndex:2},{value:`const fs = require('fs');
// \u8BFB readFileSync
const config = JSON.parse(fs.readFileSync('./public/config.json'));

config.publishTime = new Date().getTime();
// \u5199 writeFileSync
fs.writeFileSync('./public/config.json', JSON.stringify(config));
`,paraId:9,tocIndex:3},{value:`\u4E00\u3001 &
\u4E24\u4E2A\u547D\u4EE4\u540C\u6B65\u6267\u884C`,paraId:10,tocIndex:4},{value:"\u4E8C\u3001 &&\u5148\u6267\u884C 1 \u518D\u6267\u884C 2",paraId:11,tocIndex:4},{value:`{
  "scripts": {
    "electron:builder": "electron-builder",
    "build:for:electron": "cross-env ELECTRON=true vite build",
    "app:build": "yarn build:for:electron && yarn electron:builder"
  }
}
`,paraId:12,tocIndex:4},{value:`*^~\u7684\u533A\u522B
~ \u4F1A\u5339\u914D\u6700\u8FD1\u7684\u5C0F\u7248\u672C\u4F9D\u8D56\u5305\uFF0C\u6BD4\u5982~1.2.3\u4F1A\u5339\u914D\u6240\u67091.2.x\u7248\u672C\uFF0C\u4F46\u662F\u4E0D\u5305\u62EC1.3.0
^ \u4F1A\u5339\u914D\u6700\u65B0\u7684\u5927\u7248\u672C\u4F9D\u8D56\u5305\uFF0C\u6BD4\u5982^1.2.3\u4F1A\u5339\u914D\u6240\u67091.x.x\u7684\u5305\uFF0C\u5305\u62EC1.3.0\uFF0C\u4F46\u662F\u4E0D\u5305\u62EC2.0.0
* \u5B89\u88C5\u6700\u65B0\u7248\u672C\u7684\u4F9D\u8D56\u5305\uFF0C\u6BD4\u5982 *1.2.3 \u4F1A\u5339\u914D x.x.x


 1.0.0 \u662F\u2F24\u4E8E 1.0.0-<xxx>

  ^0.0.3-beta.2 \u4EE3\u8868 >= 0.0.3-beta.2 < 0.0.4-0
`,paraId:13,tocIndex:5},{value:`\u9650\u5236\u6A21\u5757\u53EA\u80FD\u5728\u67D0\u79CD\u67B6\u6784\u7684 cpu \u4E0B\u8FD0\u884C
"cpu" : [ "x64", "ia32" ]`,paraId:14,tocIndex:5},{value:`\u53EF\u4EE5\u6307\u5B9A\u4F60\u7684\u6A21\u5757\u53EA\u80FD\u5728\u54EA\u4E2A\u64CD\u4F5C\u7CFB\u7EDF\u4E0A\u8FD0\u884C
"os" : [ "darwin", "linux", "win32" ]`,paraId:15,tocIndex:5},{value:`engines \u5B57\u6BB5\u6307\u660E\u4E86\u8BE5\u6A21\u5757\u8FD0\u884C\u7684\u5E73\u53F0\uFF0C\u6BD4\u5982 Node \u6216\u8005 npm \u7684\u67D0\u4E2A\u7248\u672C\u6216\u8005\u6D4F\u89C8\u5668\u3002
{ "engines" : { "node" : ">=0.10.3 <0.12", "npm" : "~1.0.20" } }`,paraId:16,tocIndex:5},{value:"\u9700\u8981\u6CE8\u610F\uFF0Cengines \u53EA\u662F\u8D77\u4E00\u4E2A\u8BF4\u660E\u7684\u4F5C\u7528\uFF0C\u5373\u4F7F\u7528\u6237\u5B89\u88C5\u7684\u7248\u672C\u4E0D\u7B26\u5408\u8981\u6C42\uFF0C\u4E5F\u4E0D\u5F71\u54CD\u4F9D\u8D56\u5305\u7684\u5B89\u88C5\u3002",paraId:17,tocIndex:5},{value:`import ip from 'ip';
const host = ip.address();
console.log('host: ', host);
`,paraId:18,tocIndex:6},{value:"\u53C2\u8003",paraId:19,tocIndex:7},{value:`import ora from 'ora';

const spinner = ora('Loading unicorns').start();

setTimeout(() => {
  spinner.color = 'yellow';
  spinner.text = 'Loading rainbows';
}, 1000);
`,paraId:20,tocIndex:7},{value:"\u53C2\u8003",paraId:21,tocIndex:8},{value:`import { glob } from 'glob';
import path from 'path';

const tsFiles = glob.sync(path.join(process.cwd(), \`src/**/*.ts\`));
console.log('tsFiles: ', tsFiles);
// tsFiles:  [
//     '/Users/cq/Desktop/ts/src/test.ts',
//     '/Users/cq/Desktop/ts/src/fdfdfd.ts'
//   ]
`,paraId:22,tocIndex:8},{value:`const cwd = process.cwd(); //\u7528\u4E8E\u83B7\u53D6 node.js \u6D41\u7A0B\u7684\u5F53\u524D\u5DE5\u4F5C\u76EE\u5F55\u3002 cwd /Users/cq/Desktop/node

// __dirname\u4E0Eprocess.cwd()\u7684\u533A\u522B
// __dirname \u8868\u793A\u5F53\u524D\u88AB\u6267\u884C\u811A\u672C\u6587\u4EF6\u6240\u5728\u7684\u76EE\u5F55\u7684\u7EDD\u5BF9\u8DEF\u5F84 \u2014\u2014\u811A\u672C\u6587\u4EF6\u6240\u5728\u76EE\u5F55
// process.cwd() \u8FD4\u56DE\u8FD0\u884C\u5F53\u524D\u811A\u672C\u7684\u5DE5\u4F5C\u76EE\u5F55\u7684\u8DEF\u5F84 \u2014\u2014 \u811A\u672C\u6587\u4EF6\u6267\u884C\u76EE\u5F55
`,paraId:23,tocIndex:9},{value:"\u53C2\u8003",paraId:24,tocIndex:10},{value:`npm install -g live-server
live-server
`,paraId:25,tocIndex:10},{value:"\u53C2\u8003",paraId:26,tocIndex:11},{value:`/**
 * immer \u57FA\u672C\u4F7F\u7528;
 */
import produce from 'immer';

// \u8FD9\u662F\u6211\u7684\u6E90\u6570\u636E
const baseState = [
  {
    name: '\u4FEE\u8A00',
    age: 99,
  },
  {
    name: '\u79C0\u598D',
    age: 100,
  },
];

// \u5B9A\u4E49\u6570\u636E\u7684\u5199\u903B\u8F91
const recipe = (draft) => {
  draft.push({ name: 'xiuyan', age: 101 });
  draft[1].age = 102;
};

// \u501F\u52A9 produce\uFF0C\u6267\u884C\u6570\u636E\u7684\u5199\u903B\u8F91
const nextState = produce(baseState, recipe);

/**
 * \u6781\u7B80\u7248\u672Cproduce
 */

function produce(base, recipe) {
  // \u9884\u5B9A\u4E49\u4E00\u4E2A copy \u526F\u672C
  let copy;
  // \u5B9A\u4E49 base \u5BF9\u8C61\u7684 proxy handler
  const baseHandler = {
    set(obj, key, value) {
      // \u5148\u68C0\u67E5 copy \u662F\u5426\u5B58\u5728\uFF0C\u5982\u679C\u4E0D\u5B58\u5728\uFF0C\u521B\u5EFA copy
      if (!copy) {
        copy = { ...base };
      }
      // \u5982\u679C copy \u5B58\u5728\uFF0C\u4FEE\u6539 copy\uFF0C\u800C\u4E0D\u662F base
      copy[key] = value;
      return true;
    },
  };

  // \u88AB proxy \u5305\u88C5\u540E\u7684 base \u8BB0\u4E3A draft
  const draft = new Proxy(base, baseHandler);
  // \u5C06 draft \u4F5C\u4E3A\u5165\u53C2\u4F20\u5165 recipe
  recipe(draft);
  // \u8FD4\u56DE\u4E00\u4E2A\u88AB\u201C\u51BB\u7ED3\u201D\u7684 copy\uFF0C\u5982\u679C copy \u4E0D\u5B58\u5728\uFF0C\u8868\u793A\u6CA1\u6709\u6267\u884C\u5199\u64CD\u4F5C\uFF0C\u8FD4\u56DE base \u5373\u53EF
  // \u201C\u51BB\u7ED3\u201D\u662F\u4E3A\u4E86\u907F\u514D\u610F\u5916\u7684\u4FEE\u6539\u53D1\u751F\uFF0C\u8FDB\u4E00\u6B65\u4FDD\u8BC1\u6570\u636E\u7684\u7EAF\u5EA6
  return Object.freeze(copy || base);
}
`,paraId:27,tocIndex:11},{value:"\u53C2\u8003",paraId:28,tocIndex:12},{value:"1\u3001\u5BF9\u4E8E Immutable.js \u6765\u8BF4\uFF0C\u5B83\u901A\u8FC7\u6784\u5EFA\u4E00\u5957\u539F\u751F JS \u65E0\u6CD5\u652F\u6301\u7684 Trie(Trie\uFF0C\u53C8\u79F0\u4E3A\u524D\u7F00\u6811\u6216\u5B57\u5178\u6811\uFF0C\u662F\u4E00\u79CD\u6811\u5F62\u6570\u636E\u7ED3\u6784) \u6570\u636E\u7ED3\u6784\uFF0C\u6700\u7EC8\u5B9E\u73B0\u4E86\u6811\u8282\u70B9\u7684\u6309\u9700\u521B\u5EFA ",paraId:29,tocIndex:12},{value:"immutable.js \u4E0D\u53EF\u53D8\u7684\u72B6\u6001\uFF0C\u5BF9 Immutable \u5BF9\u8C61\u7684\u4EFB\u4F55\u4FEE\u6539\u6216\u6DFB\u52A0\u5220\u9664\u64CD\u4F5C\u90FD\u4F1A\u8FD4\u56DE\u4E00\u4E2A\u65B0\u7684 Immutable \u5BF9\u8C61\u3002\u9274\u4E8E\u8FD9\u4E2A\u529F\u80FD\uFF0C\u6240\u4EE5\u53EF\u4EE5\u628A\u9700\u8981\u5BF9\u6BD4\u7684 props \u6216\u8005 state \u6570\u636E\u53D8\u6210 Immutable \u5BF9\u8C61\uFF0C\u901A\u8FC7\u5BF9\u6BD4 Immutable \u662F\u5426\u76F8\u7B49\uFF0C\u6765\u8BC1\u660E\u72B6\u6001\u662F\u5426\u6539\u53D8\uFF0C\u4ECE\u800C\u786E\u5B9A\u662F\u5426\u66F4\u65B0\u7EC4\u4EF6\u3002",paraId:30,tocIndex:12},{value:"2\u3001\u5BF9\u4E8E Immer.js \u6765\u8BF4\uFF0C\u5B83\u501F\u52A9 Proxy \u7684 getter \u51FD\u6570\u5B9E\u73B0\u4E86\u6309\u9700\u4EE3\u7406\uFF0C\u501F\u52A9 Proxy \u7684 setter \u51FD\u6570\u5B9E\u73B0\u4E86\u5BF9\u8C61\u5C5E\u6027\u7684\u6309\u9700\u62F7\u8D1D ",paraId:31,tocIndex:12},{value:"\u5728 Node.js \u73AF\u5883\u4E2D\uFF0C\u8FDB\u7A0B\u4E4B\u95F4\u6709\u591A\u79CD\u901A\u4FE1\u65B9\u5F0F\u3002\u4EE5\u4E0B\u662F\u4E00\u4E9B\u5E38\u89C1\u7684\u8FDB\u7A0B\u95F4\u901A\u4FE1\uFF08IPC\uFF09\u65B9\u6CD5\uFF1A",paraId:32,tocIndex:13},{value:"Node.js \u7684 ",paraId:33,tocIndex:14},{value:"child_process",paraId:33,tocIndex:14},{value:" \u6A21\u5757\u5141\u8BB8\u4F60\u521B\u5EFA\u5B50\u8FDB\u7A0B\u5E76\u4E0E\u4E4B\u901A\u4FE1\u3002\u901A\u8FC7 ",paraId:33,tocIndex:14},{value:"fork",paraId:33,tocIndex:14},{value:" \u65B9\u6CD5\uFF0C\u4F60\u53EF\u4EE5\u521B\u5EFA\u4E00\u4E2A\u65B0\u7684 Node.js \u8FDB\u7A0B\u5E76\u4F7F\u7528 IPC \u8FDB\u884C\u901A\u4FE1\uFF1A",paraId:33,tocIndex:14},{value:`// parent.js
const { fork } = require('child_process');

const child = fork('child.js');

// \u53D1\u9001\u6D88\u606F\u7ED9\u5B50\u8FDB\u7A0B
child.send({ hello: 'world' });

// \u63A5\u6536\u5B50\u8FDB\u7A0B\u7684\u6D88\u606F
child.on('message', (message) => {
  console.log('\u6765\u81EA\u5B50\u8FDB\u7A0B\u7684\u6D88\u606F:', message);
});
`,paraId:34,tocIndex:14},{value:`// child.js
process.on('message', (message) => {
  console.log('\u6765\u81EA\u7236\u8FDB\u7A0B\u7684\u6D88\u606F:', message);
  // \u53D1\u9001\u6D88\u606F\u56DE\u7236\u8FDB\u7A0B
  process.send({ foo: 'bar' });
});
`,paraId:35,tocIndex:14},{value:"Node.js \u7684 ",paraId:36,tocIndex:15},{value:"cluster",paraId:36,tocIndex:15},{value:" \u6A21\u5757\u5141\u8BB8\u4F60\u521B\u5EFA\u5171\u4EAB\u540C\u4E00\u670D\u52A1\u5668\u7AEF\u53E3\u7684\u5B50\u8FDB\u7A0B\u3002\u8FD9\u4E9B\u5B50\u8FDB\u7A0B\uFF08\u79F0\u4E3A\u5DE5\u4F5C\u8FDB\u7A0B\uFF09\u53EF\u4EE5\u901A\u8FC7\u4E3B\u8FDB\u7A0B\u8FDB\u884C\u901A\u4FE1\uFF1A",paraId:36,tocIndex:15},{value:`// cluster.js
const cluster = require('cluster');
const http = require('http');
const numCPUs = require('os').cpus().length;

if (cluster.isMaster) {
  console.log(\`\u4E3B\u8FDB\u7A0B \${process.pid} \u6B63\u5728\u8FD0\u884C\`);

  // \u884D\u751F\u5DE5\u4F5C\u8FDB\u7A0B\u3002
  for (let i = 0; i < numCPUs; i++) {
    const worker = cluster.fork();

    // \u63A5\u6536\u5DE5\u4F5C\u8FDB\u7A0B\u7684\u6D88\u606F
    worker.on('message', (message) => {
      console.log(\`\u6765\u81EA\u5DE5\u4F5C\u8FDB\u7A0B\u7684\u6D88\u606F\uFF1A\${message}\`);
    });
  }

  // \u5982\u679C\u5DE5\u4F5C\u8FDB\u7A0B\u65AD\u5F00\u8FDE\u63A5\uFF0C\u5B83\u5E94\u8BE5\u9000\u51FA
  cluster.on('exit', (worker, code, signal) => {
    console.log(\`\u5DE5\u4F5C\u8FDB\u7A0B \${worker.process.pid} \u5DF2\u9000\u51FA\`);
  });
} else {
  // \u5DE5\u4F5C\u8FDB\u7A0B\u53EF\u4EE5\u5171\u4EAB\u4EFB\u4F55 TCP \u8FDE\u63A5
  // \u5728\u8FD9\u79CD\u60C5\u51B5\u4E0B\uFF0C\u5B83\u662F\u4E00\u4E2A HTTP \u670D\u52A1\u5668
  http
    .createServer((req, res) => {
      res.writeHead(200);
      res.end('\u4F60\u597D\u4E16\u754C\\n');
      // \u5411\u4E3B\u8FDB\u7A0B\u53D1\u9001\u6D88\u606F
      process.send(\`\u5DE5\u4F5C\u8FDB\u7A0B \${process.pid} \u56DE\u5E94\`);
    })
    .listen(8000);

  console.log(\`\u5DE5\u4F5C\u8FDB\u7A0B \${process.pid} \u5DF2\u542F\u52A8\`);
}
`,paraId:37,tocIndex:15},{value:"\u4F60\u53EF\u4EE5\u901A\u8FC7\u7F51\u7EDC\u5957\u63A5\u5B57\u6765\u5B9E\u73B0\u4E0D\u540C Node.js \u8FDB\u7A0B\u95F4\u7684\u901A\u4FE1\uFF0C\u8FDB\u7A0B\u53EF\u4EE5\u662F\u8FD0\u884C\u5728\u540C\u4E00\u53F0\u673A\u5668\u4E0A\u7684\u6216\u8005\u662F\u8FD0\u884C\u5728\u4E0D\u540C\u673A\u5668\u4E0A\u7684\u3002\u8FD9\u901A\u5E38\u4F7F\u7528 ",paraId:38,tocIndex:16},{value:"net",paraId:38,tocIndex:16},{value:"\uFF08TCP\uFF09\u6216 ",paraId:38,tocIndex:16},{value:"dgram",paraId:38,tocIndex:16},{value:"\uFF08UDP\uFF09\u6A21\u5757\u6765\u5B9E\u73B0\uFF1A",paraId:38,tocIndex:16},{value:`// TCP \u670D\u52A1\u5668
const net = require('net');
const server = net.createServer((socket) => {
  socket.write('Echo server\\r\\n');
  socket.pipe(socket);
});

server.listen(1337, '127.0.0.1');
`,paraId:39,tocIndex:16},{value:"\u5728\u66F4\u590D\u6742\u7684\u573A\u666F\u4E2D\uFF0C\u7279\u522B\u662F\u5728\u5FAE\u670D\u52A1\u67B6\u6784\u4E2D\uFF0C\u53EF\u4EE5\u4F7F\u7528\u6D88\u606F\u961F\u5217\u6216\u6D88\u606F\u4E2D\u95F4\u4EF6\uFF08\u5982 RabbitMQ, Kafka, Redis pub/sub\uFF09\u6765\u8FDB\u884C\u4E0D\u540C\u670D\u52A1\u6216\u8FDB\u7A0B\u95F4\u7684\u901A\u4FE1\u3002",paraId:40,tocIndex:17},{value:"\u8FDB\u7A0B\u53EF\u4EE5\u901A\u8FC7\u8BBF\u95EE\u5171\u4EAB\u8D44\u6E90\u6765\u8FDB\u884C\u901A\u4FE1\uFF0C\u6BD4\u5982\u6587\u4EF6\u7CFB\u7EDF\uFF08\u901A\u8FC7\u8BFB\u5199\u6587\u4EF6\u6765\u4EA4\u6362\u6570\u636E\uFF09\uFF0C\u6216\u8005\u6570\u636E\u5E93\u3002",paraId:41,tocIndex:18},{value:"\u8FD9\u4E9B\u65B9\u6CD5\u9002\u7528\u4E8E\u4E0D\u540C\u7684\u573A\u666F\u548C\u9700\u6C42\u3002\u5BF9\u4E8E\u7B80\u5355\u7684\u7236\u5B50\u8FDB\u7A0B\u901A\u4FE1\uFF0C",paraId:42,tocIndex:18},{value:"child_process",paraId:42,tocIndex:18},{value:" \u7684 ",paraId:42,tocIndex:18},{value:"fork",paraId:42,tocIndex:18},{value:" \u548C IPC \u662F\u4E00\u4E2A\u5F88\u597D\u7684\u9009\u62E9\u3002\u5BF9\u4E8E\u66F4\u5927\u89C4\u6A21\u7684\u5206\u5E03\u5F0F\u7CFB\u7EDF\uFF0C\u53EF\u80FD\u9700\u8981\u4F7F\u7528\u5230\u7F51\u7EDC\u5957\u63A5\u5B57\u6216\u8005\u6D88\u606F\u961F\u5217\u3002\u5728\u9009\u62E9\u9002\u5408\u7684\u901A\u4FE1\u65B9\u5F0F\u65F6\uFF0C\u9700\u8981\u8003\u8651\u5230\u7CFB\u7EDF\u7684\u590D\u6742\u5EA6\u3001\u6027\u80FD\u8981\u6C42\u4EE5\u53CA\u53EF\u7EF4\u62A4\u6027\u3002",paraId:42,tocIndex:18},{value:"1\u3001\u5F53\u6587\u4EF6\u5939\u4E2D\u4F7F\u7528/\u548C./\u65F6\u662F\u6709\u533A\u522B\u7684",paraId:43,tocIndex:19},{value:"/\u8868\u793A\u6839\u76EE\u5F55\uFF0C./\u8868\u793A\u5F53\u524D\u76EE\u5F55",paraId:43,tocIndex:19},{value:"2\u3001\u5F53\u5728\u6587\u4EF6\u4E2D\u4F7F\u7528/\u548C./\u65F6\uFF0C\u5982\u679C\u6B64\u65F6\u6587\u4EF6\u5728\u6839\u76EE\u5F55 ",paraId:44,tocIndex:19},{value:`
/\u548C./\u8868\u793A\u7684\u6587\u4EF6\u8DEF\u5F84\u4E00\u6837`,paraId:44,tocIndex:19},{value:"webpack \u6253\u5305\u65F6 publicPath \u6307\u5B9A\u7684\u662F\u6240\u6709\u9759\u6001\u8D44\u6E90\u7684\u8DEF\u5F84\uFF0C\u800C\u4E0D\u662F\u5355\u6307 index.html \u91CC\u9762\u9759\u6001\u8D44\u6E90\u7684\u8DEF\u5F84",paraId:45,tocIndex:19},{value:"\u5F00\u542F\u5B50\u8FDB\u7A0B\uFF1Achild_process.fork \u548C cluster.fork",paraId:46,tocIndex:20},{value:"\u4F7F\u7528 send \u548C on \u8FDB\u884C\u901A\u8BAF",paraId:46,tocIndex:20}]}}]);
