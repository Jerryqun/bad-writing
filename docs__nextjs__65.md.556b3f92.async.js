"use strict";(self.webpackChunkblog_cq=self.webpackChunkblog_cq||[]).push([[7710],{32999:function(t,s,a){a.r(s);var o=a(72269),c=a(93359),x=a(61788),m=a(19977),p=a(91558),r=a(24268),h=a(96057),v=a(85939),d=a(53683),l=a(80936),i=a(67294),n=a(57081),e=a(85893);function u(){return(0,e.jsx)(d.dY,{children:(0,e.jsx)(i.Suspense,{fallback:(0,e.jsx)(l.Z,{}),children:(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)("div",{className:"markdown",children:[(0,e.jsxs)("h2",{id:"\u524D\u8A00",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#\u524D\u8A00",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"\u524D\u8A00"]}),(0,e.jsx)("p",{children:n.texts[0].value}),(0,e.jsxs)("p",{children:[n.texts[1].value,(0,e.jsx)("strong",{children:n.texts[2].value}),n.texts[3].value]}),(0,e.jsx)("p",{children:n.texts[4].value}),(0,e.jsxs)("h2",{id:"\u4F20\u7EDF\u8868\u5355",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#\u4F20\u7EDF\u8868\u5355",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"\u4F20\u7EDF\u8868\u5355"]}),(0,e.jsx)("p",{children:n.texts[5].value}),(0,e.jsx)(r.Z,{lang:"js",children:n.texts[6].value}),(0,e.jsxs)("p",{children:[n.texts[7].value,(0,e.jsx)("code",{children:n.texts[8].value}),n.texts[9].value]}),(0,e.jsxs)("p",{children:[n.texts[10].value,(0,e.jsx)("code",{children:n.texts[11].value}),n.texts[12].value]}),(0,e.jsx)(r.Z,{lang:"js",children:n.texts[13].value}),(0,e.jsx)("p",{children:n.texts[14].value}),(0,e.jsx)("p",{children:(0,e.jsx)("img",{alt:"alt text",src:a(2100)})}),(0,e.jsx)("p",{children:n.texts[15].value}),(0,e.jsx)("p",{children:n.texts[16].value}),(0,e.jsx)("p",{children:n.texts[17].value}),(0,e.jsxs)("h2",{id:"react-hook-form",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#react-hook-form",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"React Hook Form"]}),(0,e.jsx)("p",{children:n.texts[18].value}),(0,e.jsxs)("p",{children:[n.texts[19].value,(0,e.jsx)("code",{children:n.texts[20].value}),n.texts[21].value]}),(0,e.jsx)(r.Z,{lang:"js",children:n.texts[22].value}),(0,e.jsx)("p",{children:n.texts[23].value}),(0,e.jsx)("p",{children:(0,e.jsx)("img",{alt:"alt text",src:a(11886)})}),(0,e.jsx)("p",{children:n.texts[24].value}),(0,e.jsx)(r.Z,{lang:"js",children:n.texts[25].value}),(0,e.jsx)("p",{children:n.texts[26].value}),(0,e.jsx)("ol",{children:(0,e.jsxs)("li",{children:[n.texts[27].value,(0,e.jsx)("code",{children:n.texts[28].value}),n.texts[29].value]})}),(0,e.jsx)(r.Z,{lang:"js",children:n.texts[30].value}),(0,e.jsx)("ol",{start:"2",children:(0,e.jsx)("li",{children:n.texts[31].value})}),(0,e.jsx)(r.Z,{lang:"js",children:n.texts[32].value}),(0,e.jsxs)("ol",{start:"3",children:[(0,e.jsxs)("li",{children:[n.texts[33].value,(0,e.jsx)("a",{href:"https://react-hook-form.com/docs/useform/formstate",children:n.texts[34].value})]}),(0,e.jsx)("li",{children:n.texts[35].value}),(0,e.jsx)("li",{children:n.texts[36].value})]}),(0,e.jsxs)("p",{children:[n.texts[37].value,(0,e.jsx)("a",{href:"https://react-hook-form.com/docs/useform",children:n.texts[38].value}),n.texts[39].value]}),(0,e.jsx)("p",{children:n.texts[40].value}),(0,e.jsxs)("h2",{id:"rhf--zod",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#rhf--zod",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"RHF + Zod"]}),(0,e.jsx)("p",{children:n.texts[41].value}),(0,e.jsx)("p",{children:n.texts[42].value}),(0,e.jsxs)("p",{children:[n.texts[43].value,(0,e.jsx)("a",{href:"https://github.com/react-hook-form/resolvers#quickstart",children:n.texts[44].value}),n.texts[45].value]}),(0,e.jsx)(r.Z,{lang:"bash",children:n.texts[46].value}),(0,e.jsxs)("p",{children:[n.texts[47].value,(0,e.jsx)("a",{href:"https://github.com/jquense/yup",children:n.texts[48].value}),n.texts[49].value,(0,e.jsx)("a",{href:"https://github.com/vriad/zod",children:n.texts[50].value}),n.texts[51].value,(0,e.jsx)("a",{href:"https://github.com/hapijs/joi",children:n.texts[52].value}),n.texts[53].value,(0,e.jsx)("a",{href:"https://github.com/ealush/vest",children:n.texts[54].value}),n.texts[55].value,(0,e.jsx)("a",{href:"https://github.com/ajv-validator/ajv",children:n.texts[56].value}),n.texts[57].value]}),(0,e.jsxs)("p",{children:[n.texts[58].value,(0,e.jsx)("code",{children:n.texts[59].value}),n.texts[60].value]}),(0,e.jsx)(r.Z,{lang:"js",children:n.texts[61].value}),(0,e.jsxs)("p",{children:[n.texts[62].value,(0,e.jsx)("code",{children:n.texts[63].value}),n.texts[64].value]}),(0,e.jsx)(r.Z,{lang:"js",children:n.texts[65].value}),(0,e.jsxs)("p",{children:[n.texts[66].value,(0,e.jsx)("code",{children:n.texts[67].value}),n.texts[68].value,(0,e.jsx)("code",{children:n.texts[69].value}),n.texts[70].value,(0,e.jsx)("code",{children:n.texts[71].value}),n.texts[72].value,(0,e.jsx)("code",{children:n.texts[73].value}),n.texts[74].value]}),(0,e.jsx)("p",{children:n.texts[75].value}),(0,e.jsx)("p",{children:(0,e.jsx)("img",{alt:"alt text",src:a(9888)})}),(0,e.jsxs)("h2",{id:"rhf--zod--server-actions",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#rhf--zod--server-actions",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"RHF + Zod + Server Actions"]}),(0,e.jsx)("p",{children:n.texts[76].value}),(0,e.jsxs)("p",{children:[n.texts[77].value,(0,e.jsx)("code",{children:n.texts[78].value}),n.texts[79].value]}),(0,e.jsx)(r.Z,{lang:"js",children:n.texts[80].value}),(0,e.jsxs)("p",{children:[n.texts[81].value,(0,e.jsx)("code",{children:n.texts[82].value}),n.texts[83].value]}),(0,e.jsx)(r.Z,{lang:"js",children:n.texts[84].value}),(0,e.jsx)("p",{children:n.texts[85].value}),(0,e.jsx)("p",{children:(0,e.jsx)("img",{alt:"alt text",src:a(11334)})}),(0,e.jsx)("p",{children:n.texts[86].value}),(0,e.jsxs)("h2",{id:"rhf--zod--server-actions--shadcn-ui",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#rhf--zod--server-actions--shadcn-ui",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"RHF + Zod + Server Actions + Shadcn UI"]}),(0,e.jsx)("p",{children:n.texts[87].value}),(0,e.jsx)("p",{children:n.texts[88].value}),(0,e.jsx)(r.Z,{lang:"bash",children:n.texts[89].value}),(0,e.jsx)("p",{children:n.texts[90].value}),(0,e.jsx)(r.Z,{lang:"bash",children:n.texts[91].value}),(0,e.jsxs)("p",{children:[n.texts[92].value,(0,e.jsx)("code",{children:n.texts[93].value}),n.texts[94].value]}),(0,e.jsx)(r.Z,{lang:"js",children:n.texts[95].value}),(0,e.jsx)("p",{children:n.texts[96].value}),(0,e.jsx)("ol",{children:(0,e.jsx)("li",{children:n.texts[97].value})}),(0,e.jsx)("p",{children:(0,e.jsx)("img",{alt:"alt text",src:a(9577)})}),(0,e.jsx)("ol",{start:"2",children:(0,e.jsxs)("li",{children:[n.texts[98].value,(0,e.jsx)("a",{href:"https://ui.shadcn.com/docs/components/form",children:n.texts[99].value}),n.texts[100].value,(0,e.jsx)("code",{children:n.texts[101].value}),n.texts[102].value,(0,e.jsx)("code",{children:n.texts[103].value}),n.texts[104].value,(0,e.jsx)("code",{children:n.texts[105].value}),n.texts[106].value]})}),(0,e.jsx)("p",{children:n.texts[107].value}),(0,e.jsx)("p",{children:(0,e.jsx)("img",{alt:"alt text",src:a(80300)})}),(0,e.jsxs)("h2",{id:"\u6700\u540E",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#\u6700\u540E",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"\u6700\u540E"]}),(0,e.jsx)("p",{children:n.texts[108].value}),(0,e.jsxs)("h2",{id:"\u53C2\u8003\u94FE\u63A5",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#\u53C2\u8003\u94FE\u63A5",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"\u53C2\u8003\u94FE\u63A5"]}),(0,e.jsxs)("ol",{children:[(0,e.jsx)("li",{children:(0,e.jsx)("a",{href:"https://www.youtube.com/watch?v=u6PQ5xZAv7Q&ab_channel=ByteGrad",children:n.texts[109].value})}),(0,e.jsx)("li",{children:(0,e.jsx)("a",{href:"https://github.com/ByteGrad/react-hook-form-with-zod-and-server-side/tree/main",children:n.texts[110].value})})]})]})})})})}s.default=u},57081:function(t,s,a){a.r(s),a.d(s,{texts:function(){return o}});const o=[{value:"React Hook Form \uFF0840.1k Star\uFF09\u662F\u4E00\u4E2A\u8001\u724C\u7684\u7528\u4E8E React \u5E94\u7528\u7A0B\u5E8F\u7684\u8868\u5355\u9A8C\u8BC1\u548C\u72B6\u6001\u7BA1\u7406\u5E93\u3002\u5B83\u63D0\u4F9B\u4E86\u4E00\u7EC4\u94A9\u5B50\uFF0C\u53EF\u4EE5\u8F7B\u677E\u521B\u5EFA\u548C\u7BA1\u7406\u8868\u5355\uFF0C\u800C\u65E0\u9700\u7F16\u5199\u5927\u91CF\u6837\u677F\u4EE3\u7801\u3002",paraId:0,tocIndex:0},{value:"\u4E4B\u6240\u4EE5\u8BB2 React Hook Form\uFF0C\u662F\u56E0\u4E3A ",paraId:1,tocIndex:0},{value:"Shadcn UI + React Hook Form + Zod",paraId:1,tocIndex:0},{value:" \u662F Next.js \u9879\u76EE\u5904\u7406\u8868\u5355\u63D0\u4EA4\u5E38\u89C1\u7684\u4E00\u5957\u201C\u7EC4\u5408\u62F3\u201D\u3002",paraId:1,tocIndex:0},{value:"\u4E3A\u4E86\u5FAA\u5E8F\u6E10\u8FDB\u638C\u63E1\u8FD9\u5957\u7EC4\u5408\u62F3\uFF0C\u6211\u4EEC\u5148\u4ECE\u4F20\u7EDF\u7684\u8868\u5355\u5B9E\u73B0\u5F00\u59CB\u8BB2\u8D77\u3002",paraId:2,tocIndex:0},{value:"\u8FD0\u884C\uFF1A",paraId:3,tocIndex:1},{value:`npx create-next-app@latest
`,paraId:4,tocIndex:1},{value:"\u81F3\u5C11\u8981\u9009\u62E9 Tailwind CSS\u3002\u9879\u76EE\u521B\u5EFA\u540E\uFF0C\u8FD0\u884C ",paraId:5,tocIndex:1},{value:"npm run dev",paraId:5,tocIndex:1},{value:"\u8FDB\u5165\u5F00\u53D1\u6A21\u5F0F\u3002",paraId:5,tocIndex:1},{value:"\u65B0\u5EFA ",paraId:6,tocIndex:1},{value:"app/form1/page.js",paraId:6,tocIndex:1},{value:"\uFF0C\u4EE3\u7801\u5982\u4E0B\uFF1A",paraId:6,tocIndex:1},{value:`'use client';

import { useState } from 'react';

export default function FormWithoutReactHookForm() {
  // \u5904\u7406\u8F93\u5165\u6846\u5B57\u6BB5
  const [email, setEmail] = useState('');
  const [password, setPassword] = useState('');
  const [confirmPassword, setConfirmPassword] = useState('');
  // \u5904\u7406\u63D0\u4EA4\u4E2D\u72B6\u6001
  const [isSubmitting, setIsSubmitting] = useState(false);
  // \u5904\u7406\u9519\u8BEF
  const [errors, setErrors] = useState([]);

  const handleSubmit = async (e) => {
    //  1. \u963B\u6B62\u9ED8\u8BA4\u884C\u4E3A
    e.preventDefault();

    // 2. \u5904\u7406\u63D0\u4EA4\u4E2D\u72B6\u6001
    setIsSubmitting(true);

    // 3. \u524D\u7AEF\u6821\u9A8C
    if (password !== confirmPassword) {
      setErrors(['\u4E24\u6B21\u5BC6\u7801\u4E0D\u4E00\u81F4']);
      setIsSubmitting(false);
      return;
    }

    // 4. \u6A21\u62DF\u63D0\u4EA4\u6570\u636E
    await new Promise((resolve) => setTimeout(resolve, 1000));

    // 5. \u91CD\u7F6E\u8868\u5355
    setEmail('');
    setPassword('');
    setConfirmPassword('');
    setIsSubmitting(false);
  };

  return (
    <form onSubmit={handleSubmit} className="flex flex-col gap-y-2 p-4">
      {errors.length > 0 && (
        <ul>
          {errors.map((error) => (
            <li
              key={error}
              className="bg-red-100 text-red-500 px-4 py-2 rounded"
            >
              {error}
            </li>
          ))}
        </ul>
      )}
      <input
        value={email}
        onChange={(e) => setEmail(e.target.value)}
        type="email"
        required
        placeholder="Email"
        className="px-4 py-2 rounded shadow-sm ring-1 ring-inset ring-gray-300"
      />
      <input
        value={password}
        onChange={(e) => setPassword(e.target.value)}
        type="password"
        required
        placeholder="Password"
        className="px-4 py-2 rounded shadow-sm ring-1 ring-inset ring-gray-300"
      />
      <input
        value={confirmPassword}
        onChange={(e) => setConfirmPassword(e.target.value)}
        type="password"
        required
        placeholder="Confirm password"
        className="px-4 py-2 rounded shadow-sm ring-1 ring-inset ring-gray-300"
      />

      <button
        type="submit"
        disabled={isSubmitting}
        className="bg-indigo-600 disabled:bg-gray-500 py-2 rounded text-white"
      >
        \u6CE8\u518C
      </button>
    </form>
  );
}
`,paraId:7,tocIndex:1},{value:"\u6D4F\u89C8\u5668\u6548\u679C\u5982\u4E0B\uFF1A",paraId:8,tocIndex:1},{value:"\u8FD9\u6837\u7684\u4EE3\u7801\u60F3\u5FC5\u5927\u5BB6\u90FD\u5199\u8FC7\uFF0C\u5176\u5B9E\u6709\u5F88\u591A\u201C\u95EE\u9898\u201D\uFF1A",paraId:9,tocIndex:1},{value:"\u6211\u4EEC\u9700\u8981\u58F0\u660E\u591A\u4E2A\u72B6\u6001\u7528\u4E8E\u5C06\u8F93\u5165\u6846\u6539\u4E3A\u53D7\u63A7\u7EC4\u4EF6\uFF0C\u9700\u8981\u624B\u52A8\u5904\u7406\u63D0\u4EA4\u6001\uFF0C\u5728\u51FA\u73B0\u9519\u8BEF\u7684\u65F6\u5019\uFF0C\u8FD8\u8981\u518D\u4FEE\u6539\u63D0\u4EA4\u6001\uFF0C\u9700\u8981\u624B\u52A8\u5904\u7406\u9519\u8BEF\u548C\u5C55\u793A\u9519\u8BEF\u4FE1\u606F\uFF0C\u6BCF\u6B21\u8868\u5355\u63D0\u4EA4\u90FD\u8981\u5148\u963B\u6B62\u9ED8\u8BA4\u884C\u4E3A\uFF0C\u518D\u8FDB\u884C\u524D\u7AEF\u6821\u9A8C\uFF0C\u518D\u63D0\u4EA4\u6570\u636E\uFF0C\u6700\u540E\u91CD\u7F6E\u8868\u5355\u2026\u2026\u518D\u770B\u6BCF\u4E2A input \u5143\u7D20\uFF0C\u90FD\u8981\u8BBE\u7F6E value \u548C onChange\u2026\u2026",paraId:10,tocIndex:1},{value:"\u8FD9\u5C31\u662F\u6700\u4E00\u5F00\u59CB\u8BF4\u7684\u201C\u6837\u677F\u4EE3\u7801\u201D\uFF0C\u6BCF\u6B21\u5199\u8868\u5355\u90FD\u8981\u91CD\u590D\u5199\u8FD9\u4E9B\u4EE3\u7801\u3002",paraId:11,tocIndex:1},{value:"React Hook Form \u53EF\u4EE5\u6709\u6548\u7684\u89E3\u51B3\u6837\u677F\u4EE3\u7801\u95EE\u9898\uFF0C\u6211\u4EEC\u4F7F\u7528 React Hook Form \u518D\u5199\u4E00\u7248\u3002",paraId:12,tocIndex:2},{value:"\u65B0\u5EFA ",paraId:13,tocIndex:2},{value:"app/form2/page.js",paraId:13,tocIndex:2},{value:"\uFF0C\u4EE3\u7801\u5982\u4E0B\uFF1A",paraId:13,tocIndex:2},{value:`'use client';

import { useForm } from 'react-hook-form';

export default function FormWithReactHookForm() {
  const {
    register,
    handleSubmit,
    formState: { errors, isSubmitting },
    reset,
    getValues,
  } = useForm();

  const onSubmit = async (data) => {
    // 1. \u6A21\u62DF\u63D0\u4EA4\u6570\u636E
    await new Promise((resolve) => setTimeout(resolve, 1000));

    // 2. \u91CD\u7F6E\u8868\u5355
    reset();
  };

  return (
    <form
      onSubmit={handleSubmit(onSubmit)}
      className="flex flex-col gap-y-2 p-4"
    >
      <input
        {...register('email', {
          required: '\u8BF7\u586B\u5199 Email',
        })}
        type="email"
        placeholder="\u90AE\u7BB1"
        className="px-4 py-2 rounded shadow-sm ring-1 ring-inset ring-gray-300"
      />
      {errors.email && (
        <p className="text-red-500">{\`\${errors.email.message}\`}</p>
      )}

      <input
        {...register('password', {
          required: '\u8BF7\u586B\u5199\u5BC6\u7801',
          minLength: {
            value: 5,
            message: '\u5BC6\u7801\u6700\u5C11\u8BBE\u7F6E 5 \u4E2A\u5B57\u7B26',
          },
        })}
        type="password"
        placeholder="\u5BC6\u7801"
        className="px-4 py-2 rounded shadow-sm ring-1 ring-inset ring-gray-300"
      />
      {errors.password && (
        <p className="text-red-500">{\`\${errors.password.message}\`}</p>
      )}

      <input
        {...register('confirmPassword', {
          required: '\u8BF7\u586B\u5199\u786E\u8BA4\u5BC6\u7801',
          validate: (value) =>
            value === getValues('password') || '\u5BC6\u7801\u5FC5\u987B\u4E00\u81F4',
        })}
        type="password"
        placeholder="\u786E\u8BA4\u5BC6\u7801"
        className="px-4 py-2 rounded shadow-sm ring-1 ring-inset ring-gray-300"
      />
      {errors.confirmPassword && (
        <p className="text-red-500">{\`\${errors.confirmPassword.message}\`}</p>
      )}

      <button
        type="submit"
        disabled={isSubmitting}
        className="bg-indigo-600 disabled:bg-gray-500 py-2 rounded text-white"
      >
        \u6CE8\u518C
      </button>
    </form>
  );
}
`,paraId:14,tocIndex:2},{value:"\u867D\u7136\u4EE3\u7801\u7684\u603B\u884C\u6570\u6CA1\u6709\u51CF\u5C11\u591A\u5C11\uFF0C\u4F46\u7EC4\u4EF6\u65E0\u987B\u58F0\u660E\u591A\u4E2A\u72B6\u6001\u3001\u8868\u5355\u5904\u7406\u7684\u4EE3\u7801\u4E5F\u7CBE\u7B80\u4E86\u4E0D\u5C11\u3002\u6B64\u65F6\u6D4F\u89C8\u5668\u6548\u679C\u5982\u4E0B\uFF1A",paraId:15,tocIndex:2},{value:"\u56DE\u770B\u8FD9\u6BB5\u4EE3\u7801\uFF0C\u5176\u5B9E\u6700\u6838\u5FC3\u7684\u662F\u8FD9\u6BB5\uFF1A",paraId:16,tocIndex:2},{value:`const {
  register,
  handleSubmit,
  formState: { errors, isSubmitting },
  reset,
  getValues,
} = useForm();
`,paraId:17,tocIndex:2},{value:"\u5176\u4E2D\uFF1A",paraId:18,tocIndex:2},{value:"register \u51FD\u6570\u7528\u4E8E\u7ED1\u5B9A\u8F93\u5165\u6846\uFF0C\u7B2C\u4E00\u4E2A\u53C2\u6570\u58F0\u660E name \u5B57\u6BB5\uFF0C\u5B83\u7684\u7B2C\u4E8C\u4E2A\u53C2\u6570\u7528\u4E8E\u81EA\u5B9A\u4E49\u9A8C\u8BC1\u903B\u8F91\u548C\u9519\u8BEF\u4FE1\u606F\u3002\u4F7F\u7528 ",paraId:19,tocIndex:2},{value:"...register()",paraId:19,tocIndex:2},{value:" \u76F8\u5F53\u4E8E\uFF1A",paraId:19,tocIndex:2},{value:`const { onChange, onBlur, name, ref } = register('firstName');

<input
  onChange={onChange}
  onBlur={onBlur}
  name={name}
  ref={ref}
/>

// \u76F8\u5F53\u4E8E
<input {...register('firstName')} />
`,paraId:20,tocIndex:2},{value:"handleSubmit \u7528\u4E8E\u5728\u8868\u5355\u9A8C\u8BC1\u6210\u529F\u540E\uFF0C\u63A5\u6536\u8868\u5355\u6570\u636E\uFF0C\u5B83\u9700\u8981\u4F60\u624B\u52A8\u4F20\u5165\u4E00\u4E2A\u8868\u5355\u5904\u7406\u51FD\u6570\u4F5C\u4E3A\u53C2\u6570\uFF1A",paraId:21,tocIndex:2},{value:`// \u5F02\u6B65\u63D0\u4EA4\u8868\u5355
const onSubmit = async () => {
  // handleSubmit \u4E0D\u4F1A\u5904\u7406\u9519\u8BEF\uFF0C\u6240\u4EE5\u9519\u8BEF\u9700\u8981\u81EA\u5DF1\u5904\u7406
  try {
    // await fetch()
  } catch (e) {
    // \u5904\u7406\u9519\u8BEF
  }
};

<form onSubmit={handleSubmit(onSubmit)} />;
`,paraId:22,tocIndex:2},{value:"formState \u5BF9\u8C61\u5305\u542B\u4E86\u6574\u4E2A\u8868\u5355\u72B6\u6001\u7684\u4FE1\u606F\uFF0C\u6211\u4EEC\u4ECE\u4E2D\u83B7\u53D6\u4E86 errors \u9519\u8BEF\u4FE1\u606F\u548C isSubmitting \u63D0\u4EA4\u4E2D\u72B6\u6001\uFF0C\u5176\u5B9E\u8FD8\u6709\u5F88\u591A\u5176\u4ED6\u4FE1\u606F\u5B57\u6BB5\uFF0C\u67E5\u770B ",paraId:23,tocIndex:2},{value:"formstate \u4ECB\u7ECD",paraId:23,tocIndex:2},{value:"reset \u51FD\u6570\uFF0C\u987E\u540D\u601D\u4E49\uFF0C\u7528\u4E8E\u91CD\u7F6E\u6574\u4E2A\u8868\u5355\u72B6\u6001",paraId:23,tocIndex:2},{value:"getValues \u51FD\u6570\uFF0C\u987E\u540D\u601D\u4E49\uFF0C\u7528\u4E8E\u8BFB\u53D6\u8868\u5355\u503C",paraId:23,tocIndex:2},{value:"\u5176\u5B9E\u8FD4\u56DE\u7684\u5BF9\u8C61\u8FDC\u4E0D\u6B62\u8FD9\u4E9B\u5B57\u6BB5\uFF0C\u8FD8\u6709\u76D1\u63A7\u6307\u5B9A\u8F93\u5165\u6846\u7684 watch\u3001\u624B\u52A8\u8BBE\u7F6E\u9519\u8BEF\u7684 setErrors\u3001\u8BBE\u7F6E\u7126\u70B9\u7684 setFocus\u3001\u624B\u52A8\u89E6\u53D1\u9A8C\u8BC1\u7684 trigger \u7B49\u7B49\uFF0C\u5177\u4F53\u67E5\u770B",paraId:24,tocIndex:2},{value:" useForm \u4ECB\u7ECD",paraId:24,tocIndex:2},{value:"\u3002",paraId:24,tocIndex:2},{value:"\u73B0\u5728\u6BD4\u8F83\u4E4B\u524D\u4F20\u7EDF\u8868\u5355\u7684\u5B9E\u73B0\u4EE3\u7801\uFF0C\u6211\u4EEC\u4E0D\u9700\u8981\u518D\u58F0\u660E\u591A\u4E2A useState\uFF0C\u800C\u662F\u4ECE useForm \u4E2D\u83B7\u53D6\u4E86\u6240\u6709\u9700\u8981\u7684\u51FD\u6570\u548C\u5B57\u6BB5\uFF0C\u8868\u5355\u5904\u7406\u4EE3\u7801\u4E5F\u66F4\u52A0\u7B80\u6D01\u3002",paraId:25,tocIndex:2},{value:"\u90A3\u4E48\u95EE\u9898\u6765\u4E86\uFF0CReact Hook Form \u90FD\u8FD9\u4E48\u597D\u7528\u4E86\uFF0C\u6211\u4E3A\u4EC0\u4E48\u8FD8\u8981\u7528 Zod \u5462\uFF1F",paraId:26,tocIndex:3},{value:"\u4E3B\u8981\u7684\u539F\u56E0\u5728\u4E8E React Hook Form \u7684\u6821\u9A8C\u53EA\u80FD\u7528\u5728\u5BA2\u6237\u7AEF\uFF0C\u5B9E\u9645\u5F00\u53D1\u4E2D\uFF0C\u524D\u540E\u7AEF\u5F80\u5F80\u9700\u8981\u76F8\u540C\u7684\u9A8C\u8BC1\uFF0C\u4F7F\u7528 Zod \u53EF\u521B\u5EFA\u4E00\u4E2A\u590D\u7528\u7684 Schema \u7528\u4E8E\u524D\u540E\u7AEF\u9A8C\u8BC1\u3002",paraId:27,tocIndex:3},{value:"\u4E3A\u4E86\u8BA9 React Hook Form \u548C Zod \u517C\u5BB9\uFF0C\u9700\u8981\u5B89\u88C5\u4F9D\u8D56\u9879 ",paraId:28,tocIndex:3},{value:"@hookform/resolvers",paraId:28,tocIndex:3},{value:"\uFF1A",paraId:28,tocIndex:3},{value:`npm install @hookform/resolvers
`,paraId:29,tocIndex:3},{value:"\u8FD9\u662F React Hook Form \u63D0\u4F9B\u7684\u89E3\u6790\u5668\uFF0C\u53EF\u4EE5\u8BA9\u4F60\u4F7F\u7528\u5404\u79CD\u9A8C\u8BC1\u5E93\uFF0C\u5982 ",paraId:30,tocIndex:3},{value:"Yup",paraId:30,tocIndex:3},{value:"\u3001",paraId:30,tocIndex:3},{value:"Zod",paraId:30,tocIndex:3},{value:"\u3001",paraId:30,tocIndex:3},{value:"Joi",paraId:30,tocIndex:3},{value:"\u3001",paraId:30,tocIndex:3},{value:"Vest",paraId:30,tocIndex:3},{value:"\u3001",paraId:30,tocIndex:3},{value:"Ajv",paraId:30,tocIndex:3},{value:" \u7B49\u3002",paraId:30,tocIndex:3},{value:"\u65B0\u5EFA ",paraId:31,tocIndex:3},{value:"app/form3/page.js",paraId:31,tocIndex:3},{value:"\uFF0C\u4EE3\u7801\u5982\u4E0B\uFF1A",paraId:31,tocIndex:3},{value:`'use client';

import { signUpSchema } from '@/lib/types';
import { zodResolver } from '@hookform/resolvers/zod';
import { useForm } from 'react-hook-form';

export default function FormWithReactHookFormAndZod() {
  const {
    register,
    handleSubmit,
    formState: { errors, isSubmitting },
    reset,
  } = useForm({
    resolver: zodResolver(signUpSchema),
  });

  const onSubmit = async (data) => {
    await new Promise((resolve) => setTimeout(resolve, 1000));

    reset();
  };

  return (
    <form
      onSubmit={handleSubmit(onSubmit)}
      className="flex flex-col gap-y-2 p-4"
    >
      <input
        {...register('email')}
        type="email"
        placeholder="\u90AE\u7BB1"
        className="px-4 py-2 rounded shadow-sm ring-1 ring-inset ring-gray-300"
      />
      {errors.email && (
        <p className="text-red-500">{\`\${errors.email.message}\`}</p>
      )}

      <input
        {...register('password')}
        type="password"
        placeholder="\u5BC6\u7801"
        className="px-4 py-2 rounded shadow-sm ring-1 ring-inset ring-gray-300"
      />
      {errors.password && (
        <p className="text-red-500">{\`\${errors.password.message}\`}</p>
      )}

      <input
        {...register('confirmPassword')}
        type="password"
        placeholder="\u786E\u8BA4\u5BC6\u7801"
        className="px-4 py-2 rounded shadow-sm ring-1 ring-inset ring-gray-300"
      />
      {errors.confirmPassword && (
        <p className="text-red-500">{\`\${errors.confirmPassword.message}\`}</p>
      )}

      <button
        disabled={isSubmitting}
        type="submit"
        className="bg-blue-500 disabled:bg-gray-500 py-2 rounded text-white"
      >
        \u6CE8\u518C
      </button>
    </form>
  );
}
`,paraId:32,tocIndex:3},{value:"\u65B0\u5EFA ",paraId:33,tocIndex:3},{value:"lib/types.js",paraId:33,tocIndex:3},{value:"\uFF0C\u4EE3\u7801\u5982\u4E0B\uFF1A",paraId:33,tocIndex:3},{value:`import { z } from 'zod';

export const signUpSchema = z
  .object({
    email: z
      .string()
      .min(1, { message: '\u8BF7\u586B\u5199 Email' })
      .email({ message: '\u8BF7\u586B\u5199\u6B63\u786E\u7684\u90AE\u7BB1\u5730\u5740' }),
    password: z
      .string()
      .min(1, { message: '\u8BF7\u586B\u5199\u5BC6\u7801' })
      .min(5, '\u5BC6\u7801\u6700\u5C11\u8BBE\u7F6E 5 \u4E2A\u5B57\u7B26'),
    confirmPassword: z.string().min(1, { message: '\u8BF7\u586B\u5199\u786E\u8BA4\u5BC6\u7801' }),
  })
  .refine((data) => data.password === data.confirmPassword, {
    message: '\u5BC6\u7801\u5FC5\u987B\u4E00\u81F4',
    path: ['confirmPassword'],
  });
`,paraId:34,tocIndex:3},{value:"\u6CE8\u610F\uFF1A\u5728\u8FD9\u6BB5\u4EE3\u7801\u4E2D\uFF0C\u6211\u4EEC\u4E3A\u4E86\u5B9E\u73B0\u5B57\u6BB5\u975E\u7A7A\u9A8C\u8BC1\uFF0C\u4F7F\u7528\u7684\u662F ",paraId:35,tocIndex:3},{value:".min(1, {message: 'xxxx'})",paraId:35,tocIndex:3},{value:"\uFF0C\u800C\u975E Zod \u539F\u672C\u7684 ",paraId:35,tocIndex:3},{value:'z.string({ required_error: "xxxx"}) ',paraId:35,tocIndex:3},{value:"\uFF0C\u8FD9\u662F\u56E0\u4E3A\u5F53\u63D0\u4EA4\u6570\u636E\u7684\u65F6\u5019\uFF0CReact Hook Form \u63D0\u4EA4\u7ED9 Zod \u7684\u5E76\u4E0D\u662F undefined\uFF0C\u800C\u662F\u7A7A\u5B57\u7B26\u4E32\uFF0C\u6240\u4EE5\u4E0D\u4F1A\u89E6\u53D1 Zod \u539F\u672C\u7684 ",paraId:35,tocIndex:3},{value:"required_error",paraId:35,tocIndex:3},{value:" \u6821\u9A8C\uFF0C\u4F7F\u7528 ",paraId:35,tocIndex:3},{value:"min()",paraId:35,tocIndex:3},{value:" \u7B97\u662F\u4E00\u4E2A\u201C\u66F2\u7EBF\u6551\u56FD\u201D\u7684\u505A\u6CD5\u3002",paraId:35,tocIndex:3},{value:"\u6B64\u65F6\u6D4F\u89C8\u5668\u6548\u679C\u5982\u4E0B\uFF1A",paraId:36,tocIndex:3},{value:"\u65E2\u7136\u521B\u5EFA\u4E86 Schema \u662F\u4E3A\u4E86\u524D\u540E\u7AEF\u9A8C\u8BC1\u590D\u7528\uFF0C\u90A3\u6211\u4EEC\u5C31\u518D\u5199\u5199\u5982\u4F55\u7ED3\u5408 Server Actions \u5B9E\u73B0\u4E00\u4E2A\u5B8C\u6574\u7684\u524D\u540E\u7AEF\u9A8C\u8BC1\u3002",paraId:37,tocIndex:4},{value:"\u65B0\u5EFA ",paraId:38,tocIndex:4},{value:"app/form4/page.js",paraId:38,tocIndex:4},{value:"\uFF0C\u4EE3\u7801\u5982\u4E0B\uFF1A",paraId:38,tocIndex:4},{value:`'use client';

import { signUpSchema } from '@/lib/types';
import { zodResolver } from '@hookform/resolvers/zod';
import { useForm } from 'react-hook-form';
import { signUp } from '@/actions/signUp';

export default function FormWithReactHookFormAndZod() {
  const {
    register,
    handleSubmit,
    formState: { errors, isSubmitting },
    reset,
    setError,
  } = useForm({
    resolver: zodResolver(signUpSchema),
  });

  const onSubmit = async (data) => {
    // data = {
    //   confirmPassword: "123",
    //   email: "675261143",
    //   password: "1234"
    // }

    // \u5904\u7406\u670D\u52A1\u7AEF\u9519\u8BEF
    const response = await signUp(data);

    if (!response?.success) {
      // \u663E\u793A\u670D\u52A1\u7AEF\u9519\u8BEF
      const errorKeys = Object.keys(response.message);
      errorKeys.forEach((key) => {
        setError(key, {
          type: 'server',
          message: response.message[key],
        });
      });
      return;
    }

    reset();
  };

  return (
    <form
      onSubmit={handleSubmit(onSubmit)}
      className="flex flex-col gap-y-2 p-4"
    >
      <input
        {...register('email')}
        type="email"
        placeholder="\u90AE\u7BB1"
        className="px-4 py-2 rounded shadow-sm ring-1 ring-inset ring-gray-300"
      />
      {errors.email && (
        <p className="text-red-500">{\`\${errors.email.message}\`}</p>
      )}

      <input
        {...register('password')}
        type="password"
        placeholder="\u5BC6\u7801"
        className="px-4 py-2 rounded shadow-sm ring-1 ring-inset ring-gray-300"
      />
      {errors.password && (
        <p className="text-red-500">{\`\${errors.password.message}\`}</p>
      )}

      <input
        {...register('confirmPassword')}
        type="password"
        placeholder="\u786E\u8BA4\u5BC6\u7801"
        className="px-4 py-2 rounded shadow-sm ring-1 ring-inset ring-gray-300"
      />
      {errors.confirmPassword && (
        <p className="text-red-500">{\`\${errors.confirmPassword.message}\`}</p>
      )}

      <button
        disabled={isSubmitting}
        type="submit"
        className="bg-blue-500 disabled:bg-gray-500 py-2 rounded text-white"
      >
        \u6CE8\u518C
      </button>
    </form>
  );
}
`,paraId:39,tocIndex:4},{value:"\u65B0\u5EFA ",paraId:40,tocIndex:4},{value:"actions/signUp.js",paraId:40,tocIndex:4},{value:"\uFF0C\u4EE3\u7801\u5982\u4E0B\uFF1A",paraId:40,tocIndex:4},{value:`'use server';

import { signUpSchema } from '@/lib/types';

export async function signUp(data) {
  // \u670D\u52A1\u7AEF\u6821\u9A8C
  const result = signUpSchema.safeParse(data);

  // \u8FD4\u56DE\u9519\u8BEF\u4FE1\u606F
  if (!result.success) {
    return {
      success: false,
      message: result.error.flatten().fieldErrors,
    };
  }

  // \u8FD4\u56DE\u6210\u529F\u4FE1\u606F
  return {
    success: true,
    message: '\u6CE8\u518C\u6210\u529F',
  };
}
`,paraId:41,tocIndex:4},{value:"\u6B64\u65F6\u5982\u679C\u63D0\u4EA4\u7684\u6570\u636E\u6709\u95EE\u9898\uFF08\u53EF\u901A\u8FC7 Mock \u6570\u636E\u6765\u5B9E\u73B0\uFF09\uFF0C\u6D4F\u89C8\u5668\u663E\u793A\u5982\u4E0B\uFF1A",paraId:42,tocIndex:4},{value:"\u6CE8\uFF1A\u4E0A\u56FE\u4E2D\u7684\u9519\u8BEF\u5176\u5B9E\u662F\u540E\u7AEF\u8FD4\u56DE\u7684\uFF0C\u6211\u4EEC\u4F7F\u7528 setError \u5C06\u9519\u8BEF\u4FE1\u606F\u663E\u793A\u5728\u5BF9\u5E94\u7684\u8F93\u5165\u6846\u5E95\u90E8",paraId:43,tocIndex:4},{value:"\u73B0\u5728\u6211\u4EEC\u4F7F\u7528 Shadcn UI \u5B9E\u73B0\u8FD9\u4E2A\u754C\u9762\u3002",paraId:44,tocIndex:5},{value:"\u521D\u59CB\u5316 Shadcn UI\uFF0C\u9009\u9879\u968F\u610F\u9009\u62E9\uFF1A",paraId:45,tocIndex:5},{value:`npx shadcn-ui@latest init
`,paraId:46,tocIndex:5},{value:"\u6DFB\u52A0\u7EC4\u4EF6\u4EE3\u7801\uFF1A",paraId:47,tocIndex:5},{value:`npx shadcn-ui@latest add form button input
`,paraId:48,tocIndex:5},{value:"\u65B0\u5EFA ",paraId:49,tocIndex:5},{value:"form5/page.js",paraId:49,tocIndex:5},{value:"\uFF0C\u4EE3\u7801\u5982\u4E0B\uFF1A",paraId:49,tocIndex:5},{value:`'use client';

import { useForm } from 'react-hook-form';
import { zodResolver } from '@hookform/resolvers/zod';

import { signUpSchema } from '@/lib/types';
import { signUp } from '@/actions/signUp';

import { Button } from '@/components/ui/button';
import {
  Form,
  FormControl,
  FormDescription,
  FormField,
  FormItem,
  FormLabel,
  FormMessage,
} from '@/components/ui/form';
import { Input } from '@/components/ui/input';

export default function ProfileForm() {
  const form = useForm({
    resolver: zodResolver(signUpSchema),
    defaultValues: {
      email: '',
      password: '',
      confirmPassword: '',
    },
  });

  const onSubmit = async (data) => {
    // \u5904\u7406\u670D\u52A1\u7AEF\u9519\u8BEF
    const response = await signUp(data);

    if (!response?.success) {
      // \u663E\u793A\u670D\u52A1\u7AEF\u9519\u8BEF
      const errorKeys = Object.keys(response.message);
      errorKeys.forEach((key) => {
        form.setError(key, {
          type: 'server',
          message: response.message[key],
        });
      });
      return;
    }

    form.reset();
  };

  return (
    <Form {...form}>
      <form onSubmit={form.handleSubmit(onSubmit)} className="space-y-8 p-4">
        <FormField
          control={form.control}
          name="email"
          render={({ field }) => (
            <FormItem>
              <FormLabel>\u8F93\u5165\u60A8\u7684\u90AE\u7BB1\uFF1A</FormLabel>
              <FormControl>
                <Input placeholder="\u90AE\u7BB1" {...field} />
              </FormControl>
              <FormMessage />
            </FormItem>
          )}
        />
        <FormField
          control={form.control}
          name="password"
          render={({ field }) => (
            <FormItem>
              <FormLabel>\u8F93\u5165\u60A8\u7684\u5BC6\u7801\uFF1A</FormLabel>
              <FormControl>
                <Input placeholder="\u5BC6\u7801" type="password" {...field} />
              </FormControl>
              <FormMessage />
            </FormItem>
          )}
        />
        <FormField
          control={form.control}
          name="confirmPassword"
          render={({ field }) => (
            <FormItem>
              <FormLabel>\u518D\u6B21\u8F93\u5165\u60A8\u7684\u5BC6\u7801\uFF1A</FormLabel>
              <FormControl>
                <Input placeholder="\u786E\u8BA4\u5BC6\u7801" type="password" {...field} />
              </FormControl>
              <FormMessage />
            </FormItem>
          )}
        />
        <Button type="submit" className="w-full">
          \u6CE8\u518C
        </Button>
      </form>
    </Form>
  );
}
`,paraId:50,tocIndex:5},{value:"\u5728\u8FD9\u6BB5\u4EE3\u7801\u4E2D\uFF0C\u8981\u6CE8\u610F\uFF1A",paraId:51,tocIndex:5},{value:"\u8C03\u7528 useForm \u7684\u65F6\u5019\uFF0C\u6211\u4EEC\u4F20\u5165\u4E86 defaultValues\uFF0C\u4ECE\u67D0\u79CD\u89D2\u5EA6\u6765\u8BF4\uFF0C\u8FD9\u662F\u5FC5\u987B\u7684\uFF0C\u5982\u679C\u6CA1\u6709\u4F20\uFF0C\u6D4F\u89C8\u5668\u4F1A\u6709\u62A5\u9519\uFF1A",paraId:52,tocIndex:5},{value:"\u7A0D\u5FAE\u590D\u6742\u4E00\u70B9\u7684\u662F Form \u76F8\u5173\u7684\u7EC4\u4EF6\uFF0C\u521D\u6B21\u770B\u7684\u65F6\u5019\u6709\u4E9B\u5947\u602A\uFF0C\u5199\u4E60\u60EF\u5C31\u597D\u4E86\u2026\u2026 \u7EC4\u4EF6\u7684\u89E3\u91CA\u67E5\u770B\u5B98\u65B9\u63D0\u4F9B Shadcn UI \u7684\u5B98\u65B9",paraId:53,tocIndex:5},{value:"\u63A5\u5165\u6559\u7A0B",paraId:53,tocIndex:5},{value:"\uFF0C\u8FD9\u5176\u4E2D ",paraId:53,tocIndex:5},{value:"<FormField />",paraId:53,tocIndex:5},{value:"\u7528\u4E8E\u6784\u5EFA\u53D7\u63A7\u8868\u5355\u5B57\u6BB5\uFF0C\u5728 ",paraId:53,tocIndex:5},{value:"<FormControl/>",paraId:53,tocIndex:5},{value:"\u4E0B\u4E66\u5199\u5177\u4F53\u7684\u8868\u5355\u5B57\u6BB5\uFF0C",paraId:53,tocIndex:5},{value:"<FormMessage />",paraId:53,tocIndex:5},{value:"\u4F1A\u81EA\u52A8\u8BFB\u53D6\u4E0A\u4E0B\u6587\u4E2D\u7684\u9519\u8BEF\u4FE1\u606F\u7528\u4E8E\u5C55\u793A\u3002",paraId:53,tocIndex:5},{value:"\u6D4F\u89C8\u5668\u6548\u679C\u5982\u4E0B\uFF1A",paraId:54,tocIndex:5},{value:"\u54EA\u6015\u4E0D\u4F7F\u7528 Shadcn UI\uFF0CReact Hook Form \u548C Zod \u4E5F\u662F\u5E38\u89C1\u7684\u642D\u914D\uFF0C\u582A\u79F0\u8868\u5355\u5904\u7406\u7684\u5229\u5668\u3002",paraId:55,tocIndex:6},{value:"https://www.youtube.com/watch?v=u6PQ5xZAv7Q&ab_channel=ByteGrad",paraId:56,tocIndex:7},{value:"https://github.com/ByteGrad/react-hook-form-with-zod-and-server-side/tree/main",paraId:56,tocIndex:7}]},2100:function(t,s,a){t.exports=a.p+"static/image-277.b0b50bdc.png"},11886:function(t,s,a){t.exports=a.p+"static/image-278.19f3c3ce.png"},9888:function(t,s,a){t.exports=a.p+"static/image-279.6cbcadc5.png"},11334:function(t,s,a){t.exports=a.p+"static/image-280.50aabe71.png"},9577:function(t,s,a){t.exports=a.p+"static/image-281.f282e8c0.png"},80300:function(t,s,a){t.exports=a.p+"static/image-282.cdf1cb68.png"}}]);
