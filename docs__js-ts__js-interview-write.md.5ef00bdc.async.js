"use strict";(self.webpackChunkblog_cq=self.webpackChunkblog_cq||[]).push([[4385],{94569:function(o,a,t){t.r(a);var s=t(72269),d=t(93359),j=t(61788),f=t(19977),_=t(91558),r=t(24268),h=t(96057),b=t(85939),i=t(53683),l=t(80936),u=t(67294),e=t(16319),n=t(85893);function c(){return(0,n.jsx)(i.dY,{children:(0,n.jsx)(u.Suspense,{fallback:(0,n.jsx)(l.Z,{}),children:(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:"markdown",children:[(0,n.jsxs)("h2",{id:"\u624B\u5199-objectis",children:[(0,n.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#\u624B\u5199-objectis",children:(0,n.jsx)("span",{className:"icon icon-link"})}),"\u624B\u5199 Object.is"]}),(0,n.jsx)(r.Z,{lang:"js",children:e.texts[0].value}),(0,n.jsxs)("h2",{id:"\u5B9E\u73B0-es6-\u7684-const",children:[(0,n.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#\u5B9E\u73B0-es6-\u7684-const",children:(0,n.jsx)("span",{className:"icon icon-link"})}),"\u5B9E\u73B0 ES6 \u7684 const"]}),(0,n.jsx)(r.Z,{lang:"js",children:e.texts[1].value}),(0,n.jsxs)("h2",{id:"\u624B\u5199\u6DF1\u62F7\u8D1D",children:[(0,n.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#\u624B\u5199\u6DF1\u62F7\u8D1D",children:(0,n.jsx)("span",{className:"icon icon-link"})}),"\u624B\u5199\u6DF1\u62F7\u8D1D"]}),(0,n.jsx)(r.Z,{lang:"js",children:e.texts[2].value}),(0,n.jsxs)("h2",{id:"\u624B\u5199-filter",children:[(0,n.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#\u624B\u5199-filter",children:(0,n.jsx)("span",{className:"icon icon-link"})}),"\u624B\u5199 filter"]}),(0,n.jsx)(r.Z,{lang:"js",children:e.texts[3].value}),(0,n.jsxs)("h2",{id:"\u624B\u5199-foreach",children:[(0,n.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#\u624B\u5199-foreach",children:(0,n.jsx)("span",{className:"icon icon-link"})}),"\u624B\u5199 forEach"]}),(0,n.jsx)(r.Z,{lang:"js",children:e.texts[4].value}),(0,n.jsxs)("h2",{id:"\u624B\u5199-instanceof",children:[(0,n.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#\u624B\u5199-instanceof",children:(0,n.jsx)("span",{className:"icon icon-link"})}),"\u624B\u5199 instanceof"]}),(0,n.jsx)(r.Z,{lang:"js",children:e.texts[5].value}),(0,n.jsxs)("h2",{id:"\u624B\u5199-jsonparse",children:[(0,n.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#\u624B\u5199-jsonparse",children:(0,n.jsx)("span",{className:"icon icon-link"})}),"\u624B\u5199 JSON.parse"]}),(0,n.jsx)(r.Z,{lang:"js",children:e.texts[6].value}),(0,n.jsxs)("h2",{id:"\u624B\u5199-jsonstringify",children:[(0,n.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#\u624B\u5199-jsonstringify",children:(0,n.jsx)("span",{className:"icon icon-link"})}),"\u624B\u5199 JSON.stringify"]}),(0,n.jsx)(r.Z,{lang:"js",children:e.texts[7].value}),(0,n.jsxs)("h2",{id:"\u624B\u5199-lodashisequal",children:[(0,n.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#\u624B\u5199-lodashisequal",children:(0,n.jsx)("span",{className:"icon icon-link"})}),"\u624B\u5199 lodash.isEqual"]}),(0,n.jsx)("p",{children:e.texts[8].value}),(0,n.jsx)("p",{children:e.texts[9].value}),(0,n.jsx)(r.Z,{lang:"js",children:e.texts[10].value}),(0,n.jsxs)("h2",{id:"\u624B\u5199-new",children:[(0,n.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#\u624B\u5199-new",children:(0,n.jsx)("span",{className:"icon icon-link"})}),"\u624B\u5199 new"]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("a",{target:"_blank",href:"https://juejin.cn/post/6968856664560648199",children:e.texts[11].value}),(0,n.jsx)("br",{}),e.texts[12].value,(0,n.jsx)("br",{}),e.texts[13].value,(0,n.jsx)("br",{}),e.texts[14].value,(0,n.jsx)("br",{}),e.texts[15].value]}),(0,n.jsx)(r.Z,{lang:"js",children:e.texts[16].value}),(0,n.jsxs)("h2",{id:"\u624B\u5199-promise-\u9759\u6001\u65B9\u6CD5",children:[(0,n.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#\u624B\u5199-promise-\u9759\u6001\u65B9\u6CD5",children:(0,n.jsx)("span",{className:"icon icon-link"})}),"\u624B\u5199 promise \u9759\u6001\u65B9\u6CD5"]}),(0,n.jsx)(r.Z,{lang:"js",children:e.texts[17].value}),(0,n.jsxs)("h2",{id:"\u624B\u5199-objectcreate",children:[(0,n.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#\u624B\u5199-objectcreate",children:(0,n.jsx)("span",{className:"icon icon-link"})}),"\u624B\u5199 Object.create"]}),(0,n.jsx)(r.Z,{lang:"js",children:e.texts[18].value}),(0,n.jsxs)("h2",{id:"\u624B\u5199-promise",children:[(0,n.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#\u624B\u5199-promise",children:(0,n.jsx)("span",{className:"icon icon-link"})}),"\u624B\u5199 promise"]}),(0,n.jsx)("p",{children:(0,n.jsx)("a",{target:"_blank",href:"https://juejin.cn/post/6844903625769091079",children:e.texts[19].value})}),(0,n.jsxs)("h2",{id:"\u624B\u5199-map",children:[(0,n.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#\u624B\u5199-map",children:(0,n.jsx)("span",{className:"icon icon-link"})}),"\u624B\u5199 map"]}),(0,n.jsx)(r.Z,{lang:"js",children:e.texts[20].value}),(0,n.jsxs)("h2",{id:"\u624B\u5199\u624B\u5199-lodash-\u7684-set-\u548C-get-\u65B9\u6CD5",children:[(0,n.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#\u624B\u5199\u624B\u5199-lodash-\u7684-set-\u548C-get-\u65B9\u6CD5",children:(0,n.jsx)("span",{className:"icon icon-link"})}),"\u624B\u5199\u624B\u5199 lodash \u7684 set \u548C get \u65B9\u6CD5"]}),(0,n.jsx)(r.Z,{lang:"js",children:e.texts[21].value}),(0,n.jsxs)("h2",{id:"\u7F16\u7A0B\u9898\u5B9E\u73B0\u4E00\u4E2A\u5BF9\u8C61\u7684-flatten-\u65B9\u6CD5\u5982\u4E0B",children:[(0,n.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#\u7F16\u7A0B\u9898\u5B9E\u73B0\u4E00\u4E2A\u5BF9\u8C61\u7684-flatten-\u65B9\u6CD5\u5982\u4E0B",children:(0,n.jsx)("span",{className:"icon icon-link"})}),"\u7F16\u7A0B\u9898\uFF1A\u5B9E\u73B0\u4E00\u4E2A\u5BF9\u8C61\u7684 flatten \u65B9\u6CD5\uFF0C\u5982\u4E0B\uFF1A"]}),(0,n.jsx)(r.Z,{lang:"js",children:e.texts[22].value})]})})})})}a.default=c},16319:function(o,a,t){t.r(a),t.d(a,{texts:function(){return s}});const s=[{value:`// +0 === 0
// true
// -0 ===0
// true
// NaN !== NaN
// true
// NaN === NaN
// false

Object.is = function (x, y) {
  // \u5982\u679Cx\u548Cy\u90FD\u662FNaN
  if (x !== x && y !== y) {
    return true;
  }
  // \u68C0\u67E5-0\u548C+0
  if (x === 0 && y === 0) {
    return 1 / x === 1 / y;
  }
  // \u5176\u4ED6\u60C5\u51B5\u4F7F\u7528\u4E25\u683C\u6BD4\u8F83
  return x === y;
};
`,paraId:0,tocIndex:0},{value:`const _const = (key, value) => {
  window[key] = value;
  Object.defineProperty(window, key, {
    enumerable: false,
    configurable: false,
    get: function () {
      return value;
    },
    set: function (v) {
      if (v !== value) {
        throw new TypeError('Assignment to constant variable.');
      } else {
        return value;
      }
    },
  });
};
`,paraId:1,tocIndex:1},{value:`/**
 * @param target
 * @param result
 * @returns
 * \u91CD\u590D\u589E\u5220\u6539\u5C5E\u6027\u7528WeakMap
 */

const handleFunc = (func) => {
  // \u7BAD\u5934\u51FD\u6570\u76F4\u63A5\u8FD4\u56DE\u81EA\u8EAB
  if (!func.prototype) return func;
  const bodyReg = /(?<={)(.|\\n)+(?=})/m;
  const paramReg = /(?<=\\().+(?=\\)\\s+{)/;
  const funcString = func.toString();
  // \u5206\u522B\u5339\u914D \u51FD\u6570\u53C2\u6570 \u548C \u51FD\u6570\u4F53
  const param = paramReg.exec(funcString);
  const body = bodyReg.exec(funcString);
  if (!body) return null;
  if (param) {
    const paramArr = param[0].split(',');
    return new Function(...paramArr, body[0]);
  } else {
    return new Function(body[0]);
  }
};

function deepClone(target, map = new WeakMap()) {
  // \u514B\u9686\u539F\u59CB\u7C7B\u578B \u76F4\u63A5\u8FD4\u56DE
  if (
    Object.prototype.toString.call(target) !== '[object Object]' ||
    target === null
  ) {
    return target;
  }
  // \u9632\u6B62\u5FAA\u73AF\u5F15\u7528
  if (map.get(target)) {
    return target;
  }
  // \u89E3\u51B3\u62F7\u8D1D\u5BF9\u5E94\u539F\u578B\u95EE\u9898 value\u4E3A\u5BF9\u8C61\u65F6\u8FD4\u56DE{}, value\u4E3A\u6570\u7EC4\u65F6\u4E3A[]
  const result = new target.constructor(); // [] {} Map WeakMap Set WeakSet

  // \u8BBE\u7F6E\u7F13\u5B58 \u89E3\u51B3\u5FAA\u73AF\u5F15\u7528
  map.set(target, result);

  Object.keys(target).map((key) => {
    if (target[key] instanceof Date) {
      // Date
      result[key] = new Date(target[key]);
    } else if (target[key] instanceof RegExp) {
      // RegExp
      result[key] = new RegExp(target[key]);
    } else if (target[key] instanceof Function) {
      // Function
      result[key] = handleFunc(target[key]);
    } else if (target[key] instanceof Map || target[key] instanceof WeakMap) {
      // Map || WeakMap
      target[key].forEach((item, key) => {
        result.set(deepClone(key, map), deepClone(item, map));
      });
    } else if (target[key] instanceof Set || target[key] instanceof WeakSet) {
      // Set || WeakSet
      target.forEach((item) => {
        cloneTarget.add(deepClone(item, map));
      });
    } else {
      result[key] = target[key];
    }
    if (Object.keys(target[key]).length) {
      deepClone(result[key], map);
    }
  });
  return result;
}

console.log(deepClone({ a: { c: 1, ds: 2, arr: [] } }));
/**
 * \u5FAA\u73AF\u5F15\u7528
 */
function a() {
  let obj1 = {};
  let obj2 = { c: obj1 };
  obj1.a = obj2;
  return obj2;
}
a();

/**
 * \u6D45\u62F7\u8D1D
 * 1\u3001\u7ED3\u6784\u8D4B\u503C
 * 2\u3001slice
 * 3\u3001concat()
 * 4\u3001Object.assign;
 */

let arr = [1, 2, 3, 4];
let arrClone = arr.slice();
let arrClone1 = [...arr];

// \u624B\u5199\u6D45\u62F7\u8D1D
const shallowClone = (source) => {
  const result = {};
  for (let key in source) {
    if (source.hasOwnProperty(key)) {
      result[key] = source[key];
    }
  }
  return result;
};
`,paraId:2,tocIndex:2},{value:`Array.prototype.myFilter = function (callback, context = window) {
  const res = [];
  for (let i = 0; i < this.length; i++) {
    if (callback.call(context, this[i], i, this)) {
      res.push(this[i]);
    }
  }
  return res;
};
`,paraId:3,tocIndex:3},{value:`Array.prototype.myForEach = (callback, self) => {
  const m = [...this];
  for (let i = 0; i < m.length; i++) {
    callback.call(self, m[i], i, m);
  }
};

/**
 * \u8DF3\u51FA\u5FAA\u73AF
 */

let arr = [...new Array(10).keys()];
try {
  arr.forEach((item) => {
    console.log(\`item:\${item}\`);
    if (item > 5) throw new Error('break');
  });
} catch (err) {
  if (err.message === 'break') console.log('break success!');
  else console.error(err);
}
`,paraId:4,tocIndex:4},{value:`/**
 * a instanceof Object
 * instanceof \u8FD0\u7B97\u7B26\u7528\u4E8E\u68C0\u6D4B\u6784\u9020\u51FD\u6570\u7684 prototype \u5C5E\u6027\u662F\u5426\u51FA\u73B0\u5728\u67D0\u4E2A\u5B9E\u4F8B\u5BF9\u8C61\u7684\u539F\u578B\u94FE\u4E0A\u3002
 * \u5DE6\u8FB9\u5BF9\u8C61\u53F3\u8FB9\u6784\u9020\u51FD\u6570
 * Number\uFF0CBoolean\uFF0CString\u57FA\u672C\u6570\u636E\u7C7B\u578B\u4E0D\u80FD\u5224\u65AD
 */

Number(1) instanceof Number;
// false
1 instanceof Number;
// false

// \u5224\u65ADa\u7684prototype\u662F\u5426\u5728c\u7684\u539F\u578B\u94FE\u4E0A\u3002
class a {}
const c = new a();
c instanceof a; // true

/**
 * \u624B\u5199instanceof
 */

function myInstanceOf(target, constructor) {
  // \u7531\u4E8Einstance\u8981\u68C0\u6D4B\u7684\u662F\u67D0\u5BF9\u8C61\uFF0C\u9700\u8981\u6709\u4E00\u4E2A\u524D\u7F6E\u5224\u65AD\u6761\u4EF6
  // \u57FA\u672C\u6570\u636E\u7C7B\u578B\u76F4\u63A5\u8FD4\u56DEfalse
  // if(typeof left !== 'object' || left === null) return false;
  if (!target.__proto__) return false;

  if (constructor.prototype === target.__proto__) {
    return true;
  } else {
    return myInstanceOf(target.__proto__, constructor);
  }
}

const myInstanceOf = (l, r) => {
  while (l !== null) {
    if (l.__proto__ === r.prototype) {
      return true;
    } else {
      l = l.__proto__;
    }
  }
  return false;
};
`,paraId:5,tocIndex:5},{value:`/**
 * 1 \u7528 eval
 */

const obj = { a: 1 };
const objStr = JSON.stringify(obj);
const objParse = eval(\`(\${objStr})\`);
console.log(objParse); // {a: 1}

/**
 * 2 \u7528Function
 */

const obj = { a: 1 };
const objStr = JSON.stringify(obj);
const objParse = new Function(\`return \${objStr}\`)();
console.log(objParse); // {a: 1}
`,paraId:6,tocIndex:6},{value:`/**
 * JSON.stringify({a:null})   '{"a":null}'
 * JSON.stringify({a:undefined}) '{}'
 * JSON.stringify({a:Symbol(1212)}) '{}'
 * JSON.stringify({a:function(){}})  '{}'
 * JSON.stringify([undefined,null,function(){},Symbol(212)]) '[null,null,null,null]'
 */

function myStringify(obj) {
  //\u5FFD\u7565undefind\u548Cfunction \u5148\u7F6E\u4E3Aundefined \u7EC4\u5408\u7684\u65F6\u5019\u5FFD\u7565
  if (obj === undefined || typeof obj === 'function') {
    return undefined;
  }

  //null\u6216\u8005NaN Infinity\u7F6E\u4E3Anull
  if (obj === null) {
    return null;
  }

  // \u65F6\u95F4\u5BF9\u8C61\u8F6C\u4E3A\u5B57\u7B26\u4E32
  if (obj instanceof Date) {
    return \`"\${obj.toJSON()}"\`;
  }

  //regExp\u8F93\u51FA{}
  if (obj instanceof RegExp) {
    return \`{}\`;
  }

  //\u5B57\u7B26\u4E32 \u7F6E\u4E3A\u201Cspring\u201D \u5E03\u5C14 \u6570\u5B57\u539F\u6837\u8F93\u51FA
  if (typeof obj !== 'object') {
    return typeof obj === 'string' ? \`"\${obj}"\` : obj;
  }

  //\u6570\u7EC4
  if (Array.isArray(obj)) {
    let arrStr = obj.map((item) => \`\${myStringify(item)}\`);
    return \`[\${arrStr.join(',')}]\`;
  }

  //\u91C7\u7528Object.getOwnPropertyNames\u76F4\u63A5\u8FC7\u6EE4\u6389symbol
  let keyNames = Object.getOwnPropertyNames(obj);
  const arrObj = keyNames.map((item) => {
    return \`\${
      myStringify(obj[item]) !== undefined &&
      \`"\${item}":\${myStringify(obj[item])}\`
    }\`;
  });
  return \`{\${arrObj.join(',')}}\`;
}

/**
 * JSON.stringify\u7684\u7B2C\u4E8C\u4E2A\u53C2\u6570\u662F \u66FF\u4EE3\u8005(replacer). \u66FF\u4EE3\u8005(replacer)\u53EF\u4EE5\u662F\u4E2A\u51FD\u6570\u6216\u6570\u7EC4\uFF0C\u7528\u4EE5\u63A7\u5236\u54EA\u4E9B\u503C\u5982\u4F55\u88AB\u8F6C\u6362\u4E3A\u5B57\u7B26\u4E32\u3002
\u5982\u679C\u66FF\u4EE3\u8005(replacer)\u662F\u4E2A \u6570\u7EC4 \uFF0C\u90A3\u4E48\u5C31\u53EA\u6709\u5305\u542B\u5728\u6570\u7EC4\u4E2D\u7684\u5C5E\u6027\u5C06\u4F1A\u88AB\u8F6C\u5316\u4E3A\u5B57\u7B26\u4E32\u3002\u5728\u672C\u4F8B\u4E2D\uFF0C\u53EA\u6709\u540D\u4E3A"level" \u548C "health" \u7684\u5C5E\u6027\u88AB\u5305\u62EC\u8FDB\u6765\uFF0C "username"\u5219\u88AB\u6392\u9664\u5728\u5916\u3002 data \u5C31\u7B49\u4E8E "{"level":19, "health":90}".
\u800C\u5982\u679C\u66FF\u4EE3\u8005(replacer)\u662F\u4E2A \u51FD\u6570\uFF0C\u8FD9\u4E2A\u51FD\u6570\u5C06\u88AB\u5BF9\u8C61\u7684\u6BCF\u4E2A\u5C5E\u6027\u90FD\u8C03\u7528\u4E00\u904D\u3002 \u51FD\u6570\u8FD4\u56DE\u7684\u503C\u4F1A\u6210\u4E3A\u8FD9\u4E2A\u5C5E\u6027\u7684\u503C\uFF0C\u6700\u7EC8\u4F53\u73B0\u5728\u8F6C\u5316\u540E\u7684JSON\u5B57\u7B26\u4E32\u4E2D\uFF08\u8BD1\u8005\u6CE8\uFF1AChrome\u4E0B\uFF0C\u7ECF\u8FC7\u5B9E\u9A8C\uFF0C\u5982\u679C\u6240\u6709\u5C5E\u6027\u5747\u8FD4\u56DE\u540C\u4E00\u4E2A\u503C\u7684\u65F6\u5019\u6709\u5F02\u5E38\uFF0C
\u4F1A\u76F4\u63A5\u5C06\u8FD4\u56DE\u503C\u4F5C\u4E3A\u7ED3\u679C\u8F93\u51FA\u800C\u4E0D\u4F1A\u8F93\u51FAJSON\u5B57\u7B26\u4E32\uFF09\uFF0C\u800C\u5982\u679C\u8FD4\u56DE\u503C\u4E3Aundefined\uFF0C\u5219\u8BE5\u5C5E\u6027\u4F1A\u88AB\u6392\u9664\u5728\u5916\u3002
 */

const settings = {
  username: 'lydiahallie',
  level: 19,
  health: 90,
};

const data = JSON.stringify(settings, ['level', 'health']);
console.log(data); // "{"level":19, "health":90}"
`,paraId:7,tocIndex:7},{value:"\u6267\u884C\u6DF1\u6BD4\u8F83\u6765\u786E\u5B9A\u4E24\u8005\u7684\u503C\u662F\u5426\u76F8\u7B49",paraId:8,tocIndex:8},{value:`\u8FD9\u4E2A\u65B9\u6CD5\u652F\u6301\u6BD4\u8F83 arrays, array buffers, booleans, date objects, error objects, maps,
numbers, Object objects, regexes, sets, strings, symbols,
\u4EE5\u53CA typed arrays. Object \u5BF9\u8C61\u503C\u6BD4\u8F83\u81EA\u8EAB\u7684\u5C5E\u6027\uFF0C\u4E0D\u5305\u62EC\u7EE7\u627F\u7684\u548C\u53EF\u679A\u4E3E\u7684\u5C5E\u6027\u3002 \u4E0D\u652F\u6301\u51FD\u6570\u548C DOM \u8282\u70B9\u6BD4\u8F83`,paraId:9,tocIndex:8},{value:`const myIsEqual = (obj1, obj2) => {
  // \u4E0D\u4E3A\u5BF9\u8C61\u6216\u6570\u7EC4\u65F6\u76F4\u63A5\u6BD4\u8F83
  if (typeof obj1 !== 'object' && typeof obj2 !== 'object') {
    return obj1 === obj2;
  }

  // \u5F53\u81F3\u5C11\u4E00\u4E2A\u4E3Anull\u65F6\u76F4\u63A5\u6BD4\u8F83
  if (!obj1 || !obj2) {
    return obj1 === obj2;
  }

  const keys1 = Object.keys(obj1);
  const keys2 = Object.keys(obj2);
  // \u5C5E\u6027\u957F\u5EA6\u4E0D\u4E00\u6837\u76F4\u63A5\u8FD4\u56DE
  if (keys1.length !== keys2.length) {
    return false;
  }
  for (let i = 0; i < keys1.length; i++) {
    const key = keys1[i];
    if (obj2.hasOwnProperty(key)) {
      if (typeof obj1[key] === 'object') {
        return myIsEqual(obj1[key], obj2[key]);
      } else {
        if (i === keys1.length - 1) {
          return obj1[key] === obj2[key];
        }
      }
    } else {
      return false;
    }
  }
  return false;
};
`,paraId:10,tocIndex:8},{value:"\u53C2\u8003",paraId:11,tocIndex:9},{value:`
1\u3001\u521B\u5EFA\u4E00\u4E2A\u7A7A\u5BF9\u8C61`,paraId:11,tocIndex:9},{value:`
2\u3001\u4F7F\u7A7A\u5BF9\u8C61\u7684\u9690\u5F0F\u539F\u578B\u6307\u5411\u5176\u6784\u9020\u51FD\u6570\u7684\u663E\u793A\u539F\u578B`,paraId:11,tocIndex:9},{value:`
3\u3001\u4F7F\u7528 call \u6539\u53D8 this \u6307\u5411`,paraId:11,tocIndex:9},{value:`
4\u3001\u5982\u679C\u65E0\u8FD4\u56DE\u503C\u6216\u8005\u8FD4\u56DE\u4E00\u4E2A\u975E\u5BF9\u8C61\u503C(\u8FD4\u56DE\u57FA\u7840\u7C7B\u578B\u4F1A\u88AB\u5FFD\u7565)\uFF0C\u5219\u5C06 obj \u8FD4\u56DE\u4F5C\u4E3A\u65B0\u5BF9\u8C61\uFF1B\u5982\u679C\u8FD4\u56DE\u503C\u662F\u4E00\u4E2A\u65B0\u5BF9\u8C61\u7684\u8BDD\u90A3\u4E48\u76F4\u63A5\u76F4\u63A5\u8FD4\u56DE\u8BE5\u5BF9\u8C61\u3002`,paraId:11,tocIndex:9},{value:`function myNew(Con, ...args) {
  // \u521B\u5EFA\u4E00\u4E2A\u65B0\u7684\u7A7A\u5BF9\u8C61
  let obj = {};
  // \u5C06\u8FD9\u4E2A\u7A7A\u5BF9\u8C61\u7684__proto__\u6307\u5411\u6784\u9020\u51FD\u6570\u7684\u539F\u578B
  // obj.__proto__ = Con.prototype;
  Object.setPrototypeOf(obj, Con.prototype);
  // \u5C06this\u6307\u5411\u521B\u5EFA\u7684\u5BF9\u8C61
  let res = Con.apply(obj, args);
  // \u5BF9\u6784\u9020\u51FD\u6570\u8FD4\u56DE\u503C\u505A\u5224\u65AD\uFF0C\u7136\u540E\u8FD4\u56DE\u5BF9\u5E94\u7684\u503C
  return res instanceof Object ? res : obj;
}

/**
 * Object.create\u521B\u5EFA\u5BF9\u8C61
 */
let obj = Object.create(Object.prototype);
// \u7B49\u4EF7\u4E8E
let obj = {};
`,paraId:12,tocIndex:9},{value:`Promise.myResolve = function(value) => {
  if(value instanceof Promise|| !value) {
    return value
  }
  return new Promise((resolve) => {
    resolve(value)
  })
}

Promise.myReject = function (value) {
  return new Promise((_, reject) => reject(value));
};

Promise.myAll = function (value) {
  if (!value)
    throw "TypeError: undefined is not iterable (cannot read property Symbol(Symbol.iterator))";
  return new Promise((re, rj) => {
    let count = 0;
    let result = [];
    for (let i = 0; i < value.length; i++) {
      Promise.resolve(value[i])
        .then((res) => {
          count++;
          result[i] = res;
          if (count === value.length) {
            re(result);
          }
        })
        .catch((error) => rj(error));
    }
  });
};

let p1 = new Promise((r) => r(2));

let p2 = new Promise((r) => r(3));

Promise.myAll([p1, p2]).then(console.log);

Promise.prototype.finally = function (callback) {
  return this.then(
    (value) => {
      this.constructor.resolve(callback()).then(() => value);
    },
    (err) => {
      this.constructor.reject(callback()).then(() => {
        throw err;
      });
    }
  );
};

const promise = new Promise((resolve, reject) => {
  setTimeout(() => {
    reject("1");
  }, 2000);
});
promise
  .then((res) => {
    console.log(res);
  })
  .finally(() => {
    console.log("\u6267\u884C\u4E86");
  });



`,paraId:13,tocIndex:10},{value:`function myCreate(proto) {
  function F() {}
  F.prototype = proto;
  F.prototype.constructor = F;
  return new F();
}
`,paraId:14,tocIndex:11},{value:"\u53C2\u8003",paraId:15,tocIndex:12},{value:`Array.prototype.myMap = function (fn, context) {
  const arr = [...this];
  const result = [];
  for (let i = 0; i < arr.length; i++) {
    result[i] = fn.call(context, arr[i], i, this);
  }
  return arr;
};
`,paraId:16,tocIndex:13},{value:`function get(obj, keysString) {
  const keys = keysString.split('.');
  let current = obj;
  for (let index = 0; index < keys.length; index++) {
    const element = keys[index];
    if (typeof current !== 'object' && !(element in obj)) {
      return undefined;
    }
    current = current[element];
  }
  return current;
}
let c = { name: { age: 3 } };
let g = get(c, 'name.age');
console.log('g', g);

function set(obj, keysString, value) {
  const keys = keysString.split('.');
  for (let i = 0; i < keys.length; i++) {
    const key = keys[i];
    obj[key] = i === keys.length - 1 ? value : obj[key] || {};
    obj = obj[key];
  }
  return obj;
}

let a = {};
set(a, 'params.name.age', '18');

console.log('a', a);
`,paraId:17,tocIndex:14},{value:`// flatten(obj){} \u7ED3\u679C\u8FD4\u56DE\u5982\u4E0B

// {
//   'a.b': 1,
//   'a.c': 2,
//   'a.d.e': 5,
//   'b[0]': 1,
//   'b[1]': 3,
//   'b[2].a': 2,
//   'b[2].b': 3
//    c: 3
// }
function isNumber(value) {
  return typeof value === 'number' && !isNaN(value);
}
function flatten(params) {
  const result = {};
  function convert(value, prop) {
    if (Object(value) !== value) {
      result[prop] = value;
    } else if (Array.isArray(value)) {
      value.forEach((item, index) => {
        convert(item, \`\${prop}[\${index}]\`);
      });
    } else {
      for (key in value) {
        if (value.hasOwnProperty(key)) {
          convert(value[key], prop ? \`\${prop}.\${key}\` : key);
        }
      }
    }
  }
  convert(params, '');
  return result;
}

const obj = {
  a: {
    b: 1,
    c: 2,
    d: {
      e: 5,
    },
  },
  b: [1, 3, { a: 2, b: 3 }],
  c: 3,
};

var a = flatten(obj);
console.log('a', a);
`,paraId:18,tocIndex:15}]}}]);
